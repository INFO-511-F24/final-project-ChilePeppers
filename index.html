<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="ChilePeppers">
<meta name="description" content="This project explores trends in electric vehicle (EV) charging efficiency and builds predictive models to understand charging behaviors.">

<title>EV Charging Trends and Predictions â€“ ChilePeppers INFO511 Term Project - EV Charging Trends and Predictions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-01c78b5cd655e4cd89133cf59d535862.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-474c6d7e63be50eb6972897072b39b27.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-b3fce05b3c7f9f6810c294c33b3a94e6.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-150813f2cb92d6875c6439b419e35394.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">ChilePeppers INFO511 Term Project - EV Charging Trends and Predictions</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./proposal.html"> 
<span class="menu-text">Proposal</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./presentation.html"> 
<span class="menu-text">Presentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/INFO-511-F24/final-project-ChilePeppers"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#team-chilepeppers-info511-term-project" id="toc-team-chilepeppers-info511-term-project" class="nav-link active" data-scroll-target="#team-chilepeppers-info511-term-project">Team ChilePeppers INFO511 Term Project</a>
  <ul class="collapse">
  <li><a href="#electric-vehicle-ev-charging-dataset-assessment" id="toc-electric-vehicle-ev-charging-dataset-assessment" class="nav-link" data-scroll-target="#electric-vehicle-ev-charging-dataset-assessment">Electric Vehicle (EV) Charging Dataset Assessment</a></li>
  <li><a href="#introduction-and-data" id="toc-introduction-and-data" class="nav-link" data-scroll-target="#introduction-and-data">Introduction and Data</a>
  <ul class="collapse">
  <li><a href="#table-1---electric-vehicle-ev-charging-dataset-column-headings" id="toc-table-1---electric-vehicle-ev-charging-dataset-column-headings" class="nav-link" data-scroll-target="#table-1---electric-vehicle-ev-charging-dataset-column-headings">Table 1 - Electric Vehicle (EV) Charging Dataset: Column Headings</a></li>
  <li><a href="#table-2---ev-charging-dataset-column-data-types" id="toc-table-2---ev-charging-dataset-column-data-types" class="nav-link" data-scroll-target="#table-2---ev-charging-dataset-column-data-types">Table 2 - EV Charging Dataset: Column Data Types</a></li>
  </ul></li>
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology">Methodology</a>
  <ul class="collapse">
  <li><a href="#graphical-review-of-the-data" id="toc-graphical-review-of-the-data" class="nav-link" data-scroll-target="#graphical-review-of-the-data">Graphical Review of the Data</a></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a>
  <ul class="collapse">
  <li><a href="#statistical-review-of-the-data" id="toc-statistical-review-of-the-data" class="nav-link" data-scroll-target="#statistical-review-of-the-data">Statistical Review of the Data</a></li>
  <li><a href="#predictive-model-building" id="toc-predictive-model-building" class="nav-link" data-scroll-target="#predictive-model-building">Predictive Model Building</a></li>
  </ul></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions">Conclusions</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">EV Charging Trends and Predictions</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
<p class="subtitle lead">INFO 511 - Fall 2024 - Final Project</p>
</div>

<div>
  <div class="description">
    <p>This project explores trends in electric vehicle (EV) charging efficiency and builds predictive models to understand charging behaviors.</p>
  </div>
</div>

<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">ChilePeppers </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            School of Information, University of Arizona
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  


</header>


<section id="team-chilepeppers-info511-term-project" class="level1">
<h1>Team ChilePeppers INFO511 Term Project</h1>
<section id="electric-vehicle-ev-charging-dataset-assessment" class="level2">
<h2 class="anchored" data-anchor-id="electric-vehicle-ev-charging-dataset-assessment">Electric Vehicle (EV) Charging Dataset Assessment</h2>
</section>
<section id="introduction-and-data" class="level2">
<h2 class="anchored" data-anchor-id="introduction-and-data">Introduction and Data</h2>
<p>The ChilePeppers team completed an assessment of the electric vehicle (EV) charging dataset for the INFO511 term project. The dataset was selected out of an interest to explore the evolving EV technical space and build a predictive model for charging efficiency improvements. The dataset consisted of 1320 rows and 20 columns, see Tables 1 and 2. The dataset provided charging history and profile for five electric vehicles; BMW i3, Hyundai Kona, Chevy Bolt, Nissan Leaf, and the Tesla Model 3, see Table 1. Each row in the dataset is a vehicle type with a record of a charge including location, energy consumed, charge duration, charging cost, temperature, vehicle age, charger type, and user type, see Table 2.</p>
<section id="table-1---electric-vehicle-ev-charging-dataset-column-headings" class="level3">
<h3 class="anchored" data-anchor-id="table-1---electric-vehicle-ev-charging-dataset-column-headings">Table 1 - Electric Vehicle (EV) Charging Dataset: Column Headings</h3>
<div id="32089e93" class="cell" data-execution_count="2">
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">User ID</th>
<th data-quarto-table-cell-role="th">Vehicle Model</th>
<th data-quarto-table-cell-role="th">Battery Capacity (kWh)</th>
<th data-quarto-table-cell-role="th">Charging Station ID</th>
<th data-quarto-table-cell-role="th">Charging Station Location</th>
<th data-quarto-table-cell-role="th">Charging Start Time</th>
<th data-quarto-table-cell-role="th">Charging End Time</th>
<th data-quarto-table-cell-role="th">Energy Consumed (kWh)</th>
<th data-quarto-table-cell-role="th">Charging Duration (hours)</th>
<th data-quarto-table-cell-role="th">Charging Rate (kW)</th>
<th data-quarto-table-cell-role="th">Charging Cost (USD)</th>
<th data-quarto-table-cell-role="th">Time of Day</th>
<th data-quarto-table-cell-role="th">Day of Week</th>
<th data-quarto-table-cell-role="th">State of Charge (Start %)</th>
<th data-quarto-table-cell-role="th">State of Charge (End %)</th>
<th data-quarto-table-cell-role="th">Distance Driven (since last charge) (km)</th>
<th data-quarto-table-cell-role="th">Temperature (Â°C)</th>
<th data-quarto-table-cell-role="th">Vehicle Age (years)</th>
<th data-quarto-table-cell-role="th">Charger Type</th>
<th data-quarto-table-cell-role="th">User Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>User_1</td>
<td>BMW i3</td>
<td>108.463007</td>
<td>Station_391</td>
<td>Houston</td>
<td>1/1/2024 0:00</td>
<td>1/1/2024 0:39</td>
<td>60.712346</td>
<td>0.591363</td>
<td>36.389181</td>
<td>13.087717</td>
<td>Evening</td>
<td>Tuesday</td>
<td>29.371576</td>
<td>86.119962</td>
<td>293.602111</td>
<td>27.947953</td>
<td>2.0</td>
<td>DC Fast Charger</td>
<td>Commuter</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>User_2</td>
<td>Hyundai Kona</td>
<td>100.000000</td>
<td>Station_428</td>
<td>San Francisco</td>
<td>1/1/2024 1:00</td>
<td>1/1/2024 3:01</td>
<td>12.339275</td>
<td>3.133652</td>
<td>30.677735</td>
<td>21.128448</td>
<td>Morning</td>
<td>Monday</td>
<td>10.115778</td>
<td>84.664344</td>
<td>112.112804</td>
<td>14.311026</td>
<td>3.0</td>
<td>Level 1</td>
<td>Casual Driver</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>User_3</td>
<td>Chevy Bolt</td>
<td>75.000000</td>
<td>Station_181</td>
<td>San Francisco</td>
<td>1/1/2024 2:00</td>
<td>1/1/2024 4:48</td>
<td>19.128876</td>
<td>2.452653</td>
<td>27.513593</td>
<td>35.667270</td>
<td>Morning</td>
<td>Thursday</td>
<td>6.854604</td>
<td>69.917615</td>
<td>71.799253</td>
<td>21.002002</td>
<td>2.0</td>
<td>Level 2</td>
<td>Commuter</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>User_4</td>
<td>Hyundai Kona</td>
<td>50.000000</td>
<td>Station_327</td>
<td>Houston</td>
<td>1/1/2024 3:00</td>
<td>1/1/2024 6:42</td>
<td>79.457824</td>
<td>1.266431</td>
<td>32.882870</td>
<td>13.036239</td>
<td>Evening</td>
<td>Saturday</td>
<td>83.120003</td>
<td>99.624328</td>
<td>199.577785</td>
<td>38.316313</td>
<td>1.0</td>
<td>Level 1</td>
<td>Long-Distance Traveler</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>User_5</td>
<td>Hyundai Kona</td>
<td>50.000000</td>
<td>Station_108</td>
<td>Los Angeles</td>
<td>1/1/2024 4:00</td>
<td>1/1/2024 5:46</td>
<td>19.629104</td>
<td>2.019765</td>
<td>10.215712</td>
<td>10.161471</td>
<td>Morning</td>
<td>Saturday</td>
<td>54.258950</td>
<td>63.743786</td>
<td>203.661847</td>
<td>-7.834199</td>
<td>1.0</td>
<td>Level 1</td>
<td>Long-Distance Traveler</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="table-2---ev-charging-dataset-column-data-types" class="level3">
<h3 class="anchored" data-anchor-id="table-2---ev-charging-dataset-column-data-types">Table 2 - EV Charging Dataset: Column Data Types</h3>
<div id="89e39944" class="cell" data-execution_count="3">
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 1320 entries, 0 to 1319
Data columns (total 20 columns):
 #   Column                                    Non-Null Count  Dtype  
---  ------                                    --------------  -----  
 0   User ID                                   1320 non-null   object 
 1   Vehicle Model                             1320 non-null   object 
 2   Battery Capacity (kWh)                    1320 non-null   float64
 3   Charging Station ID                       1320 non-null   object 
 4   Charging Station Location                 1320 non-null   object 
 5   Charging Start Time                       1320 non-null   object 
 6   Charging End Time                         1320 non-null   object 
 7   Energy Consumed (kWh)                     1254 non-null   float64
 8   Charging Duration (hours)                 1320 non-null   float64
 9   Charging Rate (kW)                        1254 non-null   float64
 10  Charging Cost (USD)                       1320 non-null   float64
 11  Time of Day                               1320 non-null   object 
 12  Day of Week                               1320 non-null   object 
 13  State of Charge (Start %)                 1320 non-null   float64
 14  State of Charge (End %)                   1320 non-null   float64
 15  Distance Driven (since last charge) (km)  1254 non-null   float64
 16  Temperature (Â°C)                          1320 non-null   float64
 17  Vehicle Age (years)                       1320 non-null   float64
 18  Charger Type                              1320 non-null   object 
 19  User Type                                 1320 non-null   object 
dtypes: float64(10), object(10)
memory usage: 206.4+ KB</code></pre>
</div>
</div>
<div id="53ccc532" class="cell" data-execution_count="4">
<div class="cell-output cell-output-stdout">
<pre><code>       Battery Capacity (kWh)  Energy Consumed (kWh)  Charging Duration (hours)  Charging Rate (kW)  Charging Cost (USD)  State of Charge (Start %)  State of Charge (End %)  Distance Driven (since last charge) (km)  Temperature (Â°C)  Vehicle Age (years)
count                 1320.00                1254.00                    1320.00             1254.00              1320.00                    1320.00                  1320.00                                   1254.00           1320.00              1320.00
mean                    74.53                  42.64                       2.27               25.96                22.55                      49.13                    75.14                                    153.60             15.26                 3.61
std                     20.63                  22.41                       1.06               14.01                10.75                      24.07                    17.08                                     86.00             14.83                 2.31
min                      1.53                   0.05                       0.10                1.47                 0.23                       2.33                     7.60                                      0.86            -10.72                 0.00
25%                     62.00                  23.88                       1.40               13.86                13.37                      27.79                    62.05                                     79.45              2.80                 2.00
50%                     75.00                  42.69                       2.26               25.60                22.08                      48.24                    75.68                                    152.26             14.63                 4.00
75%                     85.00                  61.21                       3.11               37.50                31.65                      69.28                    88.20                                    226.07             27.98                 6.00
max                    193.00                 152.24                       7.64               97.34                69.41                     152.49                   177.71                                    398.36             73.17                11.69</code></pre>
</div>
</div>
</section>
</section>
<section id="methodology" class="level2">
<h2 class="anchored" data-anchor-id="methodology">Methodology</h2>
<p>The methodology employed to access the ev charging dataset comprised three steps. First, a graphical review of the dataset was completed, see Figure 1 to 10. Second, a statistical analysis of the data was completed using analysis of variance (ANOVA) to complete hypothesis testing to help understanding any relationships between the factors studied, see Figure 11 to 14. Third, regression analysis was completed to build a predictive model of charging cost (USD) as a function of the factors studied and reported within the dataset, see Tables 1 to 6. In an effort to improve the predictive capabilities of the model support vector regression (SVR) was attempted on the dataset, see Tables 7, 8, and 9.</p>
<section id="graphical-review-of-the-data" class="level3">
<h3 class="anchored" data-anchor-id="graphical-review-of-the-data">Graphical Review of the Data</h3>
<p>Various types of plots were used to graphically review the dataset including boxplots, scatterplots, and correlations plots. To understand the difference or similarities between vehicle models a boxplot of vehicle model vs.&nbsp;battery capacity was created, see Figure 1. The plot indicates all car models appear to have similar battery capacity, see Figure 1. Charge duration as a function of location was also plotted, see Figure 2. Graphically there does not appear to be a significant difference in charge duration across locations, see Figure 2.</p>
<p>Scatterplots were used to understand the relationship between various factors and charging rate, see Figures 3 and 4 Charging rate vs.&nbsp;charging cost was plotted on a scatterplot with hue defining the time of day, see Figure 3. Charging rate vs charging cost was plotted with hue defining charging station location, see Figures 3 and 4 respectively. Neither plot displays any visually apparent relationships between the variables studied.</p>
<p>Histograms were leveraged to help display the distribution of the variables (i) battery capacity, (ii) energy consumed, and (iii) charging rate, see Figures 5, 6, and 7. Battery capacity appears to be three specific categories, 59, 75, and 100 kWh, see Figure 5. Energy consumed (kWh) during charging may be normally distributed with a mean of 40 kWh and a standard deviation of 13 (80/6 = 30 (spread / 6 std. dev.)) with several outliers greater than 80 kWh, see Figure 6. Charging rate may also be normally distributed with a mean of 30 kW and standard deviation of 10 kW (approximately) with several outliers greater than 60 kW, see Figure 7.</p>
<p>A boxplot was used to help understand the relationship between charging cost and time of charge and charger type, see Figure 8. Graphically is appears that charging cost is not influence by time of day or charger type as there appears to be a high variance within each subgroup vs.&nbsp;between subgroups, see Figure 8.</p>
<p>A scatterplot of charging temperature, the outside temperature during charge, and its effect on charging rate is provided in Figure 9. Here hue was defined as the age of the vehicle in years, see Figure 9. The scatterplot, like the previous scatterplots visually did not clearly display a relationship between the variables studied, see Figure 9.</p>
<p>A seaborn pairwise plot is presented in Figure 10. The pairwise plot provides a graphical summary of the entire dataset for ease of attempting to visually determine if there is a relationship or correlation between factors studied. Within the pairwise plot the hue was defined as the vehicle type, see Figure 10. Visually the pairwise plot did not identify any obvious correlations within the dataset, see Figure 10.</p>
<div id="cell-Figure1" class="cell" data-execution_count="5">
<div class="cell-output cell-output-display">
<div id="figure1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/figure1-output-1.png" width="668" height="559" class="figure-img"></p>
<figcaption>Battery Capacity (KWh) for Five Models of EV Studied</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-Figure2" class="cell" data-execution_count="6">
<div class="cell-output cell-output-display">
<div id="figure2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/figure2-output-1.png" width="651" height="559" class="figure-img"></p>
<figcaption>Charging Station Location vs.&nbsp;Charging Duration (hours)</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-Figure3" class="cell" data-execution_count="7">
<div class="cell-output cell-output-display">
<div id="figure3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/figure3-output-1.png" width="691" height="559" class="figure-img"></p>
<figcaption>Charging Rate (kW) vs Charging Cost (USD)</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-Figure4" class="cell" data-execution_count="8">
<div class="cell-output cell-output-display">
<div id="figure4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/figure4-output-1.png" width="682" height="559" class="figure-img"></p>
<figcaption>Charging Station Location vs.&nbsp;Charging Duration (hours)</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-Figure5" class="cell" data-execution_count="9">
<div class="cell-output cell-output-display">
<div id="figure5" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/figure5-output-1.png" width="526" height="411" class="figure-img"></p>
<figcaption>Histogram of Battery Capacity (kWh)</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-Figure6" class="cell" data-execution_count="10">
<div class="cell-output cell-output-display">
<div id="figure6" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/figure6-output-1.png" width="556" height="411" class="figure-img"></p>
<figcaption>Histogram of Energy Consumed during Charging (kWh)</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-Figure7" class="cell" data-execution_count="11">
<div class="cell-output cell-output-display">
<div id="figure7" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/figure7-output-1.png" width="522" height="411" class="figure-img"></p>
<figcaption>Figure 7 - Histogram of Charging Rate (kw)</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-Figure8" class="cell" data-execution_count="12">
<div class="cell-output cell-output-display">
<div id="figure8" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/figure8-output-1.png" width="659" height="559" class="figure-img"></p>
<figcaption>Charging Station Location vs.&nbsp;Charging Duration (hours)</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-Figure9" class="cell" data-execution_count="13">
<div class="cell-output cell-output-display">
<div id="figure9" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/figure9-output-1.png" width="846" height="559" class="figure-img"></p>
<figcaption>Charging Station Location vs.&nbsp;Charging Duration (hours)</figcaption>
</figure>
</div>
</div>
</div>
<section id="figure-10---seaborn-pair-plot-for-ev-charging-dataset-variables" class="level4">
<h4 class="anchored" data-anchor-id="figure-10---seaborn-pair-plot-for-ev-charging-dataset-variables">Figure 10 - Seaborn Pair Plot for EV Charging Dataset Variables</h4>
<div id="figure10" class="cell" data-execution_count="14">
<div id="figure10-1" class="cell-output cell-output-display">
<pre><code>&lt;Figure size 576x384 with 0 Axes&gt;</code></pre>
<p>Seaborn Pair Plot for EV Charging Dataset Variables</p>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/figure10-output-2.png" id="figure10-2" width="2520" height="2355" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<section id="statistical-review-of-the-data" class="level3">
<h3 class="anchored" data-anchor-id="statistical-review-of-the-data">Statistical Review of the Data</h3>
<p>A statistical review of the dataset was completed using analysis of variance (ANOVA). ANOVA was selected to complete hypothesis testing where the test is an expansion of the two-sample t-test but allows for the mean of many subgroups to be compared and for differing sample size within each subgroup. The ANOVA assesses variance sum of squares within a subgroup vs.&nbsp;between subgroups.</p>
<p>Each ANOVA includes a boxplot of the subgroups studied and a p-value. The ANOVA null hypothesis (Ho) is that all subgroups have a common mean value (p-value &gt; alpha). The ANOVA alternative hypothesis (Ha) is that at least one subgroup has a unique mean (p-value &lt; alpha). Alpha, the level of significance is typically 0.05 i.e.&nbsp;there is a 5% change of a Type I error - reject Ho when Ho is true - conclude there is a difference in mean when in fact there is no difference.</p>
<p>The first hypothesis test completed was (i) Ho: all vehicle models have the same charging cost vs.&nbsp;Ha: at least one vehicle model has a unique charging cost, see Figure 11. The ANOVA for this hypothesis test yielded a p-value = 0.032, see Figure 11. As a result, Ho is rejected in favor of Ha and we conclude at least one vehicle has a unique charging cost. The ANOVA does not identify which subgroup, vehicle model, has the unique mean and graphically it is not visually apparent what vehicle model is unique, see Figure 11.</p>
<p>The second hypothesis test completed was (ii) Ho: all charging station locations have the same mean charging cost vs.&nbsp;Ha: at least one charging station location has a unique mean charging cost, see Figure 12. The ANOVA yielded a p-value = 0.245 indicating no difference in mean charging cost between charging station locations, see Figure 12.</p>
<p>The third hypothesis test completed examined (iii) Ho: all charger types have the same mean charging cost vs.&nbsp;Ha: at least one charger type has a unique mean charging cost, see Figure 13. The ANOVA yielded a p-value = 0.02 indicating at least one charger type has a unique mean charging cost. Reviewing the boxplot it is not visually apparent what charger type is unique, see Figure 13.</p>
<p>To understand the relationship between charging temperature and charging cost a simple linear regression was completed, see Table 3. The linear regression completes the hypothesis test (iv) Ho: coefficient = 0 vs.&nbsp;Ha: coefficient is not equal to zero. The regression provided an equation for charging cost as a function of temperature, (cost (USD) = 21.7858 + 0.0459 * Temperature(C)), see Table 3. A scatterplot of temperature and charging cost with the linear regression line is provided in Figure 14. The p-value for the regressor coefficient was less than alpha indicating there exists a statistically significant relationship and increasing temperature results in increased charging cost, see Table 3 and Figure 14.</p>
<p>ANOVA was used to understand how (i) vehicle model, (ii) charging station locations, and (iii) charger type had an effect on charging cost. Charging cost appears to be influenced by vehicle model and charger type, see Figures 11 and 13 respectively. The simple linear regression highlighted the relationship between temperature and charging cost. The results of the statistical analysis helped inform the multivariate regression predictive model building efforts.</p>
<div id="9eab5257" class="cell" data-execution_count="15">
<div class="cell-output cell-output-stdout">
<pre><code>['BMW i3' 'Hyundai Kona' 'Chevy Bolt' 'Nissan Leaf' 'Tesla Model 3']</code></pre>
</div>
</div>
<div id="cell-Figure11" class="cell" data-execution_count="16">
<div class="cell-output cell-output-display">
<div id="figure11" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/figure11-output-1.png" width="588" height="393" class="figure-img"></p>
<figcaption>ANOVA vehicle model vs charging cost</figcaption>
</figure>
</div>
</div>
</div>
<div id="9bb23272" class="cell" data-execution_count="17">
<div class="cell-output cell-output-stdout">
<pre><code>['Houston' 'San Francisco' 'Los Angeles' 'Chicago' 'New York']
P-value: 0.2448970288756026</code></pre>
</div>
</div>
<div id="cell-Figure12" class="cell" data-execution_count="18">
<div class="cell-output cell-output-display">
<div id="figure12" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/figure12-output-1.png" width="622" height="393" class="figure-img"></p>
<figcaption>ANOVA: Charging Location vs Charging Cost</figcaption>
</figure>
</div>
</div>
</div>
<div id="45bc3fc9" class="cell" data-execution_count="19">
<div class="cell-output cell-output-stdout">
<pre><code>['DC Fast Charger' 'Level 1' 'Level 2']
P-value: 0.022949860885377312</code></pre>
</div>
</div>
<div id="cell-Figure13" class="cell" data-execution_count="20">
<div class="cell-output cell-output-display">
<div id="figure13" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/figure13-output-1.png" width="517" height="393" class="figure-img"></p>
<figcaption>ANOVA: Charger Type vs Charging Cost</figcaption>
</figure>
</div>
</div>
</div>
<section id="table-3---linear-regression-charging-cost-usd-as-a-function-of-temperature-c" class="level4">
<h4 class="anchored" data-anchor-id="table-3---linear-regression-charging-cost-usd-as-a-function-of-temperature-c">Table 3 - Linear Regression: Charging Cost (USD) as a function of Temperature (C)</h4>
<div id="2ca635b6" class="cell" data-execution_count="21">
<div class="cell-output cell-output-stdout">
<pre><code>                             OLS Regression Results                            
===============================================================================
Dep. Variable:     Charging Cost (USD)   R-squared:                       0.004
Model:                             OLS   Adj. R-squared:                  0.003
Method:                  Least Squares   F-statistic:                     4.461
Date:                 Mon, 16 Dec 2024   Prob (F-statistic):             0.0349
Time:                         18:29:47   Log-Likelihood:                -4292.6
No. Observations:                 1131   AIC:                             8589.
Df Residuals:                     1129   BIC:                             8599.
Df Model:                            1                                         
Covariance Type:             nonrobust                                         
====================================================================================
                       coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------------
const               21.7858      0.462     47.171      0.000      20.880      22.692
Temperature (Â°C)     0.0459      0.022      2.112      0.035       0.003       0.089
==============================================================================
Omnibus:                       33.961   Durbin-Watson:                   2.134
Prob(Omnibus):                  0.000   Jarque-Bera (JB):               26.027
Skew:                           0.279   Prob(JB):                     2.23e-06
Kurtosis:                       2.510   Cond. No.                         30.7
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.

P-value for Temperature (Â°C): 0.03489</code></pre>
</div>
</div>
<div id="cell-Figure14" class="cell" data-execution_count="22">
<div class="cell-output cell-output-display">
<div id="figure14" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/figure14-output-1.png" width="808" height="551" class="figure-img"></p>
<figcaption>Linear Regression: Temperature vs Charging Cost</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="predictive-model-building" class="level3">
<h3 class="anchored" data-anchor-id="predictive-model-building">Predictive Model Building</h3>
<p>An attempt was made to build a predictive model of charging cost as a function of the factors studied within the dataset using multivariate regression analysis. The multivariate regression analysis was completed in three iterations. The first iteration included all factors in the dataset, see Table 4a and 4b. The second iteration included only those terms that appear to be statistically significant, to improve the R-sq-adjusted value by removing non-significant parameters from the model, see Table 5. The third iteration was a refinement of the regression model, again reducing the number of terms to attempt a model with a high value for R-sq-adjusted, see Table 6.</p>
<p>The initial regression model included all the terms within the EV charging dataset, see Table 4b. The categorical variables were transformed to numerical values using one-hot-encoding, see Table 4b. That first model provided an empirical model of charging cost as a function of all variables studied with an R-sq-adjusted of 0.017 meaning the model explained 1.7% of the variance within the dataset.</p>
<p>To improve the R-sq-adjusted value a majority of the non-significant factors were removed from the model, see Table 5. This second model provided an R-sq-adjusted value of 0.021, that is the model explained 2.1% of the variance within the dataset.</p>
<p>A third multivariate regression model was attempted, again removing non-significant (p-value &gt; 0.05) terms from the model in an attempt to improve R-sq-adjusted by including only statistically significant terms in the model, see Table 6. The third model yielding an R-sq-adjusted = 0.018 - typically an R-sq-adj value greater than 0.7 or 70% is desired.</p>
<p>The results of the multivariate regression analysis were disappointing, none of the model attempts yielded an R-sq-adjusted above 50%. As a result, the support vector regression (SVR) algorithm was attempted to predict charging cost as a function of the other variables or columns in the dataset, see Tables 7, 8 and 9.The initial SVR model included only numerical factors and provided an R-sq-adjusted of -0.25, see Table 7. The second SVM attempt included all factors, numerical and categorical, one-hot-encoding was used to transform categorical factors to numerical, and grid search employed to optimize the RBF kernel hyper-parameters, see Table 8. A third SVM attempt also included all factors and grid search employed to optimize the polynomial kernel, see Table 9. In both SVRâ€™s the data was scaled to ensure a uniform range for each variable studied. However, the second model, even with grid search, yielded a low value for R-sq-adjusted of -0.39 indicating the model was no better than a simple linear regression.</p>
<p>The empirical modeling effort included multivariate regression and support vector regression analysis. Other machine learning algorithms were not attempted because the response, charging cost, was a continues variable and not binary or categorical; as a result, logistic regression nor nearest neighbors were applied. The best performing model was a multivariate regression analysis that included only statistically significant terms and provided an R-sq = 0.041 and R-sq-adjusted = 0.021. The results of the predictive model building were disappointing and may need an expert review to ensure no technical errors in the code were made.</p>
<section id="table-4a---initial-multivariable-regression-analysis-charging-cost-usd-mse-and-r-squared" class="level4">
<h4 class="anchored" data-anchor-id="table-4a---initial-multivariable-regression-analysis-charging-cost-usd-mse-and-r-squared">Table 4a - Initial Multivariable Regression Analysis: Charging Cost (USD) MSE and R-squared</h4>
<div id="dc8433d7" class="cell" data-execution_count="25">
<div class="cell-output cell-output-stdout">
<pre><code>Table 4a - Initial Multivariable Regression Analysis: Charging Cost (USD) MSE and R-squared
Mean Squared Error: 126.57
R-squared: -0.03</code></pre>
</div>
</div>
</section>
<section id="table-4b---initial-multivariable-regression-analysis-charging-cost-usd-model-summary" class="level4">
<h4 class="anchored" data-anchor-id="table-4b---initial-multivariable-regression-analysis-charging-cost-usd-model-summary">Table 4b - Initial Multivariable Regression Analysis: Charging Cost (USD) Model Summary</h4>
<div id="c92d0e28" class="cell" data-execution_count="26">
<div class="cell-output cell-output-stdout">
<pre><code>Table 4b - Initial Multivariable Regression Analysis: Charging Cost (USD) Model Summary
                             OLS Regression Results                            
===============================================================================
Dep. Variable:     Charging Cost (USD)   R-squared:                       0.043
Model:                             OLS   Adj. R-squared:                  0.017
Method:                  Least Squares   F-statistic:                     1.655
Date:                 Mon, 16 Dec 2024   Prob (F-statistic):             0.0151
Time:                         18:29:48   Log-Likelihood:                -4269.8
No. Observations:                 1131   AIC:                             8602.
Df Residuals:                     1100   BIC:                             8758.
Df Model:                           30                                         
Covariance Type:             nonrobust                                         
============================================================================================================
                                               coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------------------------------------
const                                       27.6761      2.842      9.739      0.000      22.100      33.252
Battery Capacity (kWh)                       0.0009      0.016      0.055      0.956      -0.030       0.031
Energy Consumed (kWh)                       -0.0076      0.014     -0.523      0.601      -0.036       0.021
Charging Duration (hours)                    0.2679      0.304      0.880      0.379      -0.330       0.865
Charging Rate (kW)                          -0.0005      0.023     -0.022      0.982      -0.046       0.045
State of Charge (Start %)                   -0.0165      0.013     -1.243      0.214      -0.043       0.010
State of Charge (End %)                     -0.0411      0.019     -2.142      0.032      -0.079      -0.003
Distance Driven (since last charge) (km)     0.0014      0.004      0.372      0.710      -0.006       0.009
Temperature (Â°C)                             0.0488      0.022      2.230      0.026       0.006       0.092
Vehicle Age (years)                         -0.0663      0.138     -0.479      0.632      -0.338       0.205
Vehicle Model_Chevy Bolt                     0.6426      1.037      0.620      0.536      -1.392       2.677
Vehicle Model_Hyundai Kona                   2.5749      1.034      2.489      0.013       0.545       4.605
Vehicle Model_Nissan Leaf                    2.5322      1.019      2.486      0.013       0.533       4.531
Vehicle Model_Tesla Model 3                  1.0139      1.004      1.010      0.313      -0.957       2.985
Charging Station Location_Houston           -1.7790      1.034     -1.721      0.086      -3.808       0.250
Charging Station Location_Los Angeles       -0.6016      1.016     -0.592      0.554      -2.596       1.392
Charging Station Location_New York          -1.2459      1.045     -1.193      0.233      -3.296       0.804
Charging Station Location_San Francisco     -2.1057      1.042     -2.021      0.044      -4.150      -0.061
Time of Day_Evening                         -1.1979      0.899     -1.332      0.183      -2.963       0.567
Time of Day_Morning                         -0.9523      0.912     -1.044      0.297      -2.743       0.838
Time of Day_Night                           -1.3616      0.942     -1.445      0.149      -3.210       0.487
Day of Week_Monday                          -0.7105      1.215     -0.585      0.559      -3.094       1.673
Day of Week_Saturday                        -0.5143      1.192     -0.431      0.666      -2.854       1.825
Day of Week_Sunday                          -1.4321      1.198     -1.195      0.232      -3.783       0.919
Day of Week_Thursday                         1.3305      1.268      1.049      0.294      -1.158       3.819
Day of Week_Tuesday                         -1.7839      1.184     -1.506      0.132      -4.108       0.540
Day of Week_Wednesday                        0.5948      1.198      0.497      0.619      -1.755       2.945
Charger Type_Level 1                        -2.0433      0.778     -2.627      0.009      -3.569      -0.517
Charger Type_Level 2                        -1.2791      0.802     -1.596      0.111      -2.852       0.294
User Type_Commuter                           0.1571      0.795      0.198      0.843      -1.403       1.717
User Type_Long-Distance Traveler            -0.5242      0.807     -0.650      0.516      -2.108       1.059
==============================================================================
Omnibus:                       43.971   Durbin-Watson:                   2.157
Prob(Omnibus):                  0.000   Jarque-Bera (JB):               26.044
Skew:                           0.221   Prob(JB):                     2.21e-06
Kurtosis:                       2.402   Cond. No.                     2.01e+03
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The condition number is large, 2.01e+03. This might indicate that there are
strong multicollinearity or other numerical problems.</code></pre>
</div>
</div>
</section>
<section id="table-5---second-iteration-statistically-significant-factors-multivariable-regression-analysis" class="level4">
<h4 class="anchored" data-anchor-id="table-5---second-iteration-statistically-significant-factors-multivariable-regression-analysis">Table 5 - Second Iteration, Statistically Significant Factors, Multivariable Regression Analysis</h4>
<div id="6d4d6d84" class="cell" data-execution_count="27">
<div class="cell-output cell-output-stdout">
<pre><code>Table 5 - Second Iteration, Statistically Significant Factors, Multivariable Regression Analysis
                             OLS Regression Results                            
===============================================================================
Dep. Variable:     Charging Cost (USD)   R-squared:                       0.041
Model:                             OLS   Adj. R-squared:                  0.021
Method:                  Least Squares   F-statistic:                     2.035
Date:                 Mon, 16 Dec 2024   Prob (F-statistic):            0.00277
Time:                         18:29:48   Log-Likelihood:                -4271.4
No. Observations:                 1131   AIC:                             8591.
Df Residuals:                     1107   BIC:                             8712.
Df Model:                           23                                         
Covariance Type:             nonrobust                                         
===========================================================================================================
                                              coef    std err          t      P&gt;|t|      [0.025      0.975]
-----------------------------------------------------------------------------------------------------------
const                                      27.1726      2.102     12.930      0.000      23.049      31.296
State of Charge (End %)                    -0.0405      0.019     -2.123      0.034      -0.078      -0.003
Temperature (Â°C)                            0.0467      0.022      2.145      0.032       0.004       0.089
Vehicle Model_Chevy Bolt                    0.7493      1.027      0.730      0.466      -1.265       2.764
Vehicle Model_Hyundai Kona                  2.6782      1.027      2.607      0.009       0.662       4.694
Vehicle Model_Nissan Leaf                   2.6001      1.013      2.568      0.010       0.613       4.587
Vehicle Model_Tesla Model 3                 1.0828      0.998      1.085      0.278      -0.875       3.041
Charging Station Location_Houston          -1.8020      1.031     -1.749      0.081      -3.824       0.220
Charging Station Location_Los Angeles      -0.6514      1.012     -0.644      0.520      -2.637       1.334
Charging Station Location_New York         -1.2522      1.040     -1.205      0.229      -3.292       0.788
Charging Station Location_San Francisco    -2.0176      1.034     -1.951      0.051      -4.047       0.012
Time of Day_Evening                        -1.1499      0.895     -1.284      0.199      -2.907       0.607
Time of Day_Morning                        -0.9250      0.909     -1.017      0.309      -2.709       0.859
Time of Day_Night                          -1.3318      0.939     -1.418      0.156      -3.174       0.510
Day of Week_Monday                         -0.7490      1.210     -0.619      0.536      -3.123       1.625
Day of Week_Saturday                       -0.5816      1.188     -0.490      0.624      -2.912       1.749
Day of Week_Sunday                         -1.5309      1.192     -1.285      0.199      -3.869       0.807
Day of Week_Thursday                        1.2658      1.263      1.002      0.317      -1.213       3.745
Day of Week_Tuesday                        -1.8306      1.180     -1.551      0.121      -4.146       0.485
Day of Week_Wednesday                       0.4830      1.190      0.406      0.685      -1.853       2.819
Charger Type_Level 1                       -2.0737      0.776     -2.673      0.008      -3.596      -0.551
Charger Type_Level 2                       -1.3212      0.797     -1.657      0.098      -2.886       0.243
User Type_Commuter                          0.1675      0.789      0.212      0.832      -1.381       1.716
User Type_Long-Distance Traveler           -0.5557      0.803     -0.692      0.489      -2.132       1.020
==============================================================================
Omnibus:                       42.005   Durbin-Watson:                   2.152
Prob(Omnibus):                  0.000   Jarque-Bera (JB):               25.876
Skew:                           0.229   Prob(JB):                     2.40e-06
Kurtosis:                       2.418   Cond. No.                         638.
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
</div>
</section>
<section id="table-6---third-iteration-statistically-significant-factors-multivariable-regression-analysis" class="level4">
<h4 class="anchored" data-anchor-id="table-6---third-iteration-statistically-significant-factors-multivariable-regression-analysis">Table 6 - Third Iteration, Statistically Significant Factors, Multivariable Regression Analysis</h4>
<div id="66bf3f6f" class="cell" data-execution_count="28">
<div class="cell-output cell-output-stdout">
<pre><code>Table 6 - Third Iteration, Statistically Significant Factors, Multivariable Regression Analysis
                             OLS Regression Results                            
===============================================================================
Dep. Variable:     Charging Cost (USD)   R-squared:                       0.030
Model:                             OLS   Adj. R-squared:                  0.018
Method:                  Least Squares   F-statistic:                     2.503
Date:                 Mon, 16 Dec 2024   Prob (F-statistic):            0.00163
Time:                         18:29:48   Log-Likelihood:                -4277.3
No. Observations:                 1131   AIC:                             8585.
Df Residuals:                     1116   BIC:                             8660.
Df Model:                           14                                         
Covariance Type:             nonrobust                                         
===========================================================================================================
                                              coef    std err          t      P&gt;|t|      [0.025      0.975]
-----------------------------------------------------------------------------------------------------------
const                                      26.2434      1.879     13.968      0.000      22.557      29.930
State of Charge (End %)                    -0.0448      0.019     -2.363      0.018      -0.082      -0.008
Temperature (Â°C)                            0.0480      0.022      2.208      0.027       0.005       0.091
Vehicle Model_Chevy Bolt                    0.8166      1.022      0.799      0.424      -1.188       2.821
Vehicle Model_Hyundai Kona                  2.7024      1.023      2.641      0.008       0.695       4.710
Vehicle Model_Nissan Leaf                   2.5519      1.010      2.526      0.012       0.570       4.534
Vehicle Model_Tesla Model 3                 1.0744      0.995      1.080      0.281      -0.878       3.027
Charging Station Location_Houston          -2.1081      1.025     -2.056      0.040      -4.120      -0.096
Charging Station Location_Los Angeles      -0.8851      1.004     -0.882      0.378      -2.855       1.085
Charging Station Location_New York         -1.2028      1.036     -1.161      0.246      -3.235       0.829
Charging Station Location_San Francisco    -2.1567      1.034     -2.085      0.037      -4.186      -0.127
Charger Type_Level 1                       -2.1236      0.775     -2.740      0.006      -3.644      -0.603
Charger Type_Level 2                       -1.3024      0.795     -1.639      0.102      -2.862       0.257
User Type_Commuter                          0.1773      0.789      0.225      0.822      -1.370       1.725
User Type_Long-Distance Traveler           -0.5135      0.799     -0.642      0.521      -2.082       1.055
==============================================================================
Omnibus:                       36.441   Durbin-Watson:                   2.144
Prob(Omnibus):                  0.000   Jarque-Bera (JB):               24.787
Skew:                           0.244   Prob(JB):                     4.15e-06
Kurtosis:                       2.463   Cond. No.                         530.
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
</div>
</section>
<section id="table-7---support-vector-machine-all-factors-with-one-hot-encoding-and-grid-search-linear-rbf-and-polynomial-kernels" class="level4">
<h4 class="anchored" data-anchor-id="table-7---support-vector-machine-all-factors-with-one-hot-encoding-and-grid-search-linear-rbf-and-polynomial-kernels">Table 7 - Support Vector Machine: All Factors with One-Hot-Encoding and Grid Search Linear, RBF, and Polynomial Kernels</h4>
<div id="3c1a7510" class="cell" data-execution_count="29">
<div class="cell-output cell-output-stdout">
<pre><code>Fitting 5 folds for each of 54 candidates, totalling 270 fits
===== Kernel: linear, rbf, poly: Model Summary =====
Best Hyperparameters: {'C': 0.1, 'epsilon': 1, 'gamma': 'scale', 'kernel': 'rbf'}

Performance Metrics:
Mean Squared Error (MSE): 123.44
RÂ² Score: -0.01
Adjusted RÂ² Score: -0.16

Best Estimator:
SVR(C=0.1, epsilon=1)</code></pre>
</div>
</div>
</section>
<section id="table-8---support-vector-machine-all-factors-with-one-hot-encoding-and-grid-search-rbf-kernel-hyperparameters" class="level4">
<h4 class="anchored" data-anchor-id="table-8---support-vector-machine-all-factors-with-one-hot-encoding-and-grid-search-rbf-kernel-hyperparameters">Table 8 - Support Vector Machine: All Factors with One-Hot-Encoding and Grid Search RBF Kernel Hyperparameters</h4>
<div id="41eee03e" class="cell" data-execution_count="30">
<div class="cell-output cell-output-stdout">
<pre><code>Fitting 5 folds for each of 25 candidates, totalling 125 fits
===== RBF Kernel: Model Summary =====
Best Hyperparameters: {'C': 0.1, 'gamma': 'scale', 'kernel': 'rbf'}

Performance Metrics:
Mean Squared Error (MSE): 126.26
RÂ² Score: -0.03
Adjusted RÂ² Score: -0.19

Best Estimator:
SVR(C=0.1)</code></pre>
</div>
</div>
</section>
<section id="table-9---support-vector-machine-all-factors-with-one-hot-encoding-and-grid-search-polynomial-kernel-hyperparameters" class="level4">
<h4 class="anchored" data-anchor-id="table-9---support-vector-machine-all-factors-with-one-hot-encoding-and-grid-search-polynomial-kernel-hyperparameters">Table 9 - Support Vector Machine: All Factors with One-Hot-Encoding and Grid Search Polynomial Kernel Hyperparameters</h4>
<div id="38c1e1dc" class="cell" data-execution_count="31">
<div class="cell-output cell-output-stdout">
<pre><code>Fitting 5 folds for each of 32 candidates, totalling 160 fits
===== Kernel = Poly: Model Summary =====
Best Hyperparameters:
{'C': 0.1, 'degree': 2, 'gamma': 'scale', 'kernel': 'poly'}

Performance Metrics:
Mean Squared Error (MSE): 125.40
RÂ² Score: -0.02
Adjusted RÂ² Score: -0.18

Best Estimator:
SVR(C=0.1, degree=2, kernel='poly')</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="discussion" class="level2">
<h2 class="anchored" data-anchor-id="discussion">Discussion</h2>
<p>The term project comprised an analysis of an electric vehicle charging dataset, see Tables 1 and 2. The analysis of the dataset, to understand what variables influenced charging cost was completed in stages. First, a graphical assessment of the data was completed, see Figures 1 to 10. Second, a statistical review leveraging analysis of variance (ANOVA) was completed to try and understand or isolated variables that might have an effect on charging cost, see Figures 11 to 14. Next empirical models were created and refined to predict charging cost as a function of the other variables in the dataset, see Tables 1 and 2. The modeling effort included both multivariate regression analysis and support vector machine algorithms. The results of the regression analysis is provided in Tables 4, 5 and 6. The results of the support vector machine algorithms are presented in Tables 7 and 8.</p>
<p>The electric vehicle charging dataset comprised 1320 rows of data and 20 columns. Each row was a charging event with various data documented in the columns, see Tables 1 and 2. The graphical assessment of the dataset did not reveal any obvious trends with respect to charging cost, see Figures 1 to 10.</p>
<p>The statistical analysis of the data was completed using analysis of variance to compare the means across multiple subgroups, see Figures 11, 12, and 13. That work indicated that vehicle type and charger type had an effect on charging cost, or at least one subgroup in each analysis had an unique mean, see Figures 11 and 13 respectively. Temperature was a continuous variable; as a result, simple linear regression was used to determine the relationship between temperature and charging cost, see Table 3. That work indicated temperature did influence charging cost, increasing temperature increased the cost of charging, see Table 3 and Figure 14.</p>
<p>Multivariable regression analysis was used to create predictive models of charging cost as a function of the other variables in the dataset, see Tables 4, 6, and 6. The regression analysis included both continuous numerical variables and categorical variables, the categorical variables were transformed to numerical values using one-hot-encoding. The regression analysis approach was iterative. The first model included all the factors in the dataset and yielded an R-sq-adjusted of 0.017 indicating the model explained 1.7% of the variance in the dataset, see Tables 4a and 4b. Ideally, an R-sq-adjusted &gt; 70% would be preferred for a well performing predictive model. The performance of regression model was improved by removing non-significant terms, see Tables 5 and 6. However, the best performing model had an R-sq-adjusted value of 0.021 or 2.1%.</p>
<p>In an effort to create an improved predictive model the support vector machine (SVM) algorithm was attempted, see Tables 7, 8 and 9. The initial SVM model included only numerical factors to create a predictive model of charging cost; however, that model also yielded a low R-sq-adjusted value of -0.25, see Table 7. To improve the SVM algorithm performance a second attempt was made. That second attempt included both numerical and categorical factors, one-hot-encoding was used to transform categorical factors to numerical, and the RBF kernel implement, see Table 8. The data was scaled using the standard scalar to ensure a uniform range across all factors. To find optimum SVM parameters a grid search was included. Here too the model performed poorly providing an R-sq-adjusted of -0.39 indicating the SVM was no better than linear regression, see Table 8. A third attempt using the polynomial kernel and grid search to optimizes hyper-parameters did not yield improved results, see Table 9. The SVM regression did not perform as well as the multi-variable regression perhaps because the dataset was simply not large enough or the dataset is not well suited to the SVM algorithm.</p>
</section>
<section id="conclusions" class="level2">
<h2 class="anchored" data-anchor-id="conclusions">Conclusions</h2>
<p>The ChilePeppers team completed an assessment of an electric vehicle charging dataset. The dataset provided a record of 1320 charging events and recording 20 parameters for each event. The analysis was completed in stages. First a graphical review of the dataset was completed. Then a statistical review was leveraged to complete hypothesis testing using both ANOVA and regression analysis to understand or identify charging factors that influence the charging cost. Next predictive models were attempted to estimate the charging cost as a function of the other parameters in the dataset using both multivariate regression and support vector machine algorithms. The statistical analysis identified vehicle type and charger type as influencing charging cost. The predictive models while yielding empirical models or equations provided algorithms with very low values for R-sq and R-sq-adjusted. The multi-variable regression analysis provided a model with R-squared-adusted = 2.1% and the support vector machine regression algorithm provided a negative value for R-squared-adjusted. Ideally an empirical model would be characterized by an R-squared adjusted greater than 70% indicating the model explains more than 70% of the variance in the dataset. In this example the models are not capable of predicting charging cost as a function of the variables studied.</p>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb15" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "EV Charging Trends and Predictions"</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "INFO 511 - Fall 2024 - Final Project"</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> </span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">  - name: "ChilePeppers"</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">    affiliations:</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">      - name: "School of Information, University of Arizona"</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> |</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co">  This project explores trends in electric vehicle (EV) charging efficiency </span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co">  and builds predictive models to understand charging behaviors.</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co">    code-overflow: wrap</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co">    embed-resources: true</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-width: 6</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-height: 4  </span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: False</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="co">  echo: False</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="an">jupyter:</span><span class="co"> python3</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: load-pkgs</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scipy.stats <span class="im">as</span> stats </span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">"ignore"</span>)</span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a><span class="fu"># Team ChilePeppers INFO511 Term Project</span></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a><span class="fu">## Electric Vehicle (EV) Charging Dataset Assessment</span></span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction and Data</span></span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>The ChilePeppers team completed an assessment of the electric vehicle (EV) charging dataset for the INFO511 term project. The dataset was selected out of an interest to explore the evolving EV technical space and build a predictive model for charging efficiency improvements. The dataset consisted of 1320 rows and 20 columns, see Tables 1 and 2. The dataset provided charging history and profile for five electric vehicles; BMW i3, Hyundai Kona, Chevy Bolt, Nissan Leaf, and the Tesla Model 3, see Table 1. Each row in the dataset is a vehicle type with a record of a charge including location, energy consumed, charge duration, charging cost, temperature, vehicle age, charger type, and user type, see Table 2.</span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a><span class="fu">### Table 1 - Electric Vehicle (EV) Charging Dataset: Column Headings</span></span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/INFO-511-F24/final-project-ChilePeppers/main/data/ev_charging_patterns.csv"</span></span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>ev_charging  <span class="op">=</span> pd.read_csv(url)</span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>ev_charging.head()</span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a><span class="fu">### Table 2 - EV Charging Dataset: Column Data Types</span></span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a>ev_charging.info()</span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-72"><a href="#cb15-72" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-73"><a href="#cb15-73" aria-hidden="true" tabindex="-1"></a>pd.set_option(<span class="st">'display.max_columns'</span>, <span class="va">None</span>) </span>
<span id="cb15-74"><a href="#cb15-74" aria-hidden="true" tabindex="-1"></a>pd.set_option(<span class="st">'display.width'</span>, <span class="dv">1000</span>)    </span>
<span id="cb15-75"><a href="#cb15-75" aria-hidden="true" tabindex="-1"></a>pd.set_option(<span class="st">'display.float_format'</span>, <span class="st">'</span><span class="sc">{:.2f}</span><span class="st">'</span>.<span class="bu">format</span>) </span>
<span id="cb15-76"><a href="#cb15-76" aria-hidden="true" tabindex="-1"></a>summary_stats <span class="op">=</span> ev_charging.describe()</span>
<span id="cb15-77"><a href="#cb15-77" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(summary_stats)</span>
<span id="cb15-78"><a href="#cb15-78" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-79"><a href="#cb15-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-80"><a href="#cb15-80" aria-hidden="true" tabindex="-1"></a><span class="fu">## Methodology</span></span>
<span id="cb15-81"><a href="#cb15-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-82"><a href="#cb15-82" aria-hidden="true" tabindex="-1"></a>The methodology employed to access the ev charging dataset comprised three steps. First, a graphical review of the dataset was completed, see Figure 1 to 10. Second, a statistical analysis of the data was completed using analysis of variance (ANOVA) to complete hypothesis testing to help understanding any relationships between the factors studied, see Figure 11 to 14. Third, regression analysis was completed to build a predictive model of charging cost (USD) as a function of the factors studied and reported within the dataset, see Tables 1 to 6. In an effort to improve the predictive capabilities of the model support vector regression (SVR) was attempted on the dataset, see Tables 7, 8, and 9.</span>
<span id="cb15-83"><a href="#cb15-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-84"><a href="#cb15-84" aria-hidden="true" tabindex="-1"></a><span class="fu">### Graphical Review of the Data</span></span>
<span id="cb15-85"><a href="#cb15-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-86"><a href="#cb15-86" aria-hidden="true" tabindex="-1"></a>Various types of plots were used to graphically review the dataset including boxplots, scatterplots, and correlations plots. To understand the difference or similarities between vehicle models a boxplot of vehicle model vs. battery capacity was created, see Figure 1. The plot indicates all car models appear to have similar battery capacity, see Figure 1. Charge duration as a function of location was also plotted, see Figure 2. Graphically there does not appear to be a significant difference in charge duration across locations, see Figure 2.</span>
<span id="cb15-87"><a href="#cb15-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-88"><a href="#cb15-88" aria-hidden="true" tabindex="-1"></a>Scatterplots were used to understand the relationship between various factors and charging rate, see Figures 3 and 4 Charging rate vs. charging cost was plotted on a scatterplot with hue defining the time of day, see Figure 3. Charging rate vs charging cost was plotted with hue defining charging station location, see Figures 3 and 4 respectively. Neither plot displays any visually apparent relationships between the variables studied.</span>
<span id="cb15-89"><a href="#cb15-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-90"><a href="#cb15-90" aria-hidden="true" tabindex="-1"></a>Histograms were leveraged to help display the distribution of the variables (i) battery capacity, (ii) energy consumed, and (iii) charging rate, see Figures 5, 6, and 7. Battery capacity appears to be three specific categories, 59, 75, and 100 kWh, see Figure 5. Energy consumed (kWh) during charging may be normally distributed with a mean of 40 kWh and a standard deviation of 13 (80/6 = 30 (spread / 6 std. dev.)) with several outliers greater than 80 kWh, see Figure 6. Charging rate may also be normally distributed with a mean of 30 kW and standard deviation of 10 kW (approximately) with several outliers greater than 60 kW, see Figure 7.</span>
<span id="cb15-91"><a href="#cb15-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-92"><a href="#cb15-92" aria-hidden="true" tabindex="-1"></a>A boxplot was used to help understand the relationship between charging cost and time of charge and charger type, see Figure 8. Graphically is appears that charging cost is not influence by time of day or charger type as there appears to be a high variance within each subgroup vs. between subgroups, see Figure 8.</span>
<span id="cb15-93"><a href="#cb15-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-94"><a href="#cb15-94" aria-hidden="true" tabindex="-1"></a>A scatterplot of charging temperature, the outside temperature during charge, and its effect on charging rate is provided in Figure 9. Here hue was defined as the age of the vehicle in years, see Figure 9. The scatterplot, like the previous scatterplots visually did not clearly display a relationship between the variables studied, see Figure 9.</span>
<span id="cb15-95"><a href="#cb15-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-96"><a href="#cb15-96" aria-hidden="true" tabindex="-1"></a>A seaborn pairwise plot is presented in Figure 10. The pairwise plot provides a graphical summary of the entire dataset for ease of attempting to visually determine if there is a relationship or correlation between factors studied. Within the pairwise plot the hue was defined as the vehicle type, see Figure 10. Visually the pairwise plot did not identify any obvious correlations within the dataset, see Figure 10.</span>
<span id="cb15-97"><a href="#cb15-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-100"><a href="#cb15-100" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-101"><a href="#cb15-101" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: Figure1</span></span>
<span id="cb15-102"><a href="#cb15-102" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Battery Capacity (KWh) for Five Models of EV Studied"</span></span>
<span id="cb15-103"><a href="#cb15-103" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb15-104"><a href="#cb15-104" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>ev_charging,x<span class="op">=</span><span class="st">'Vehicle Model'</span>,y<span class="op">=</span><span class="st">'Battery Capacity (kWh)'</span>)</span>
<span id="cb15-105"><a href="#cb15-105" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'</span><span class="ch">\n</span><span class="st">Figure 1 - Battery Capacity (KWh) for Five Models of EV Studied</span><span class="ch">\n</span><span class="st">'</span>)</span>
<span id="cb15-106"><a href="#cb15-106" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Vehicle Model Studied'</span>)</span>
<span id="cb15-107"><a href="#cb15-107" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Battery Capacity (kWh)'</span>)</span>
<span id="cb15-108"><a href="#cb15-108" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-109"><a href="#cb15-109" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-110"><a href="#cb15-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-113"><a href="#cb15-113" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-114"><a href="#cb15-114" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: Figure2</span></span>
<span id="cb15-115"><a href="#cb15-115" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Charging Station Location vs. Charging Duration (hours)"</span></span>
<span id="cb15-116"><a href="#cb15-116" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb15-117"><a href="#cb15-117" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>ev_charging,x<span class="op">=</span><span class="st">'Charging Station Location'</span>,y<span class="op">=</span><span class="st">'Charging Duration (hours)'</span>)</span>
<span id="cb15-118"><a href="#cb15-118" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'</span><span class="ch">\n</span><span class="st">Figure 2 - Charging Station Location vs. Charging Duration (hours)</span><span class="ch">\n</span><span class="st">'</span>)</span>
<span id="cb15-119"><a href="#cb15-119" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Charging Station Location'</span>)</span>
<span id="cb15-120"><a href="#cb15-120" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Charge Duration (hours)'</span>)</span>
<span id="cb15-121"><a href="#cb15-121" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-122"><a href="#cb15-122" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-123"><a href="#cb15-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-126"><a href="#cb15-126" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-127"><a href="#cb15-127" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: Figure3</span></span>
<span id="cb15-128"><a href="#cb15-128" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Charging Rate (kW) vs Charging Cost (USD)"</span></span>
<span id="cb15-129"><a href="#cb15-129" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb15-130"><a href="#cb15-130" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(data<span class="op">=</span>ev_charging,x<span class="op">=</span><span class="st">'Charging Rate (kW)'</span>,y<span class="op">=</span><span class="st">'Charging Cost (USD)'</span>,hue<span class="op">=</span><span class="st">'Time of Day'</span>)</span>
<span id="cb15-131"><a href="#cb15-131" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'</span><span class="ch">\n</span><span class="st">Figure 3 - Charging Rate (kW) vs Charging Cost (USD) as a function of Time of Day</span><span class="ch">\n</span><span class="st">'</span>)</span>
<span id="cb15-132"><a href="#cb15-132" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Charging Rate (kW)'</span>)</span>
<span id="cb15-133"><a href="#cb15-133" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Charging Cost (USD)'</span>)</span>
<span id="cb15-134"><a href="#cb15-134" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-135"><a href="#cb15-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-136"><a href="#cb15-136" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-137"><a href="#cb15-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-140"><a href="#cb15-140" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-141"><a href="#cb15-141" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: Figure4</span></span>
<span id="cb15-142"><a href="#cb15-142" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Charging Station Location vs. Charging Duration (hours)"</span></span>
<span id="cb15-143"><a href="#cb15-143" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb15-144"><a href="#cb15-144" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(data<span class="op">=</span>ev_charging,x<span class="op">=</span><span class="st">'Charging Rate (kW)'</span>,y<span class="op">=</span><span class="st">'Charging Cost (USD)'</span>,hue<span class="op">=</span><span class="st">'Charging Station Location'</span>)</span>
<span id="cb15-145"><a href="#cb15-145" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'</span><span class="ch">\n</span><span class="st">Figure 4 - Charging Rate (kW) vs. Charging Cost (USD) as a function of Location </span><span class="ch">\n</span><span class="st">'</span>)</span>
<span id="cb15-146"><a href="#cb15-146" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Charging Rate (kW)'</span>)</span>
<span id="cb15-147"><a href="#cb15-147" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Chraging Cost (USD)'</span>)</span>
<span id="cb15-148"><a href="#cb15-148" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-149"><a href="#cb15-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-150"><a href="#cb15-150" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-151"><a href="#cb15-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-154"><a href="#cb15-154" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-155"><a href="#cb15-155" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: Figure5</span></span>
<span id="cb15-156"><a href="#cb15-156" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogram of Battery Capacity (kWh)"</span></span>
<span id="cb15-157"><a href="#cb15-157" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb15-158"><a href="#cb15-158" aria-hidden="true" tabindex="-1"></a>sns.histplot(data<span class="op">=</span>ev_charging,x<span class="op">=</span><span class="st">'Battery Capacity (kWh)'</span>)</span>
<span id="cb15-159"><a href="#cb15-159" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'</span><span class="ch">\n</span><span class="st">Figure 5 - Histogram of Battery Capacity (kWh)</span><span class="ch">\n</span><span class="st">'</span>)</span>
<span id="cb15-160"><a href="#cb15-160" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Battery Capacity (kWh)'</span>)</span>
<span id="cb15-161"><a href="#cb15-161" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Count'</span>)</span>
<span id="cb15-162"><a href="#cb15-162" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-163"><a href="#cb15-163" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-164"><a href="#cb15-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-167"><a href="#cb15-167" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-168"><a href="#cb15-168" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: Figure6</span></span>
<span id="cb15-169"><a href="#cb15-169" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histogram of Energy Consumed during Charging (kWh)"</span></span>
<span id="cb15-170"><a href="#cb15-170" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb15-171"><a href="#cb15-171" aria-hidden="true" tabindex="-1"></a>sns.histplot(data<span class="op">=</span>ev_charging,x<span class="op">=</span><span class="st">'Energy Consumed (kWh)'</span>)</span>
<span id="cb15-172"><a href="#cb15-172" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'</span><span class="ch">\n</span><span class="st">Figure 6 - Histogram of Energy Consumed during Charging (kWh)</span><span class="ch">\n</span><span class="st">'</span>)</span>
<span id="cb15-173"><a href="#cb15-173" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Energy Consumed'</span>)</span>
<span id="cb15-174"><a href="#cb15-174" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Count'</span>)</span>
<span id="cb15-175"><a href="#cb15-175" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-176"><a href="#cb15-176" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-177"><a href="#cb15-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-180"><a href="#cb15-180" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-181"><a href="#cb15-181" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: Figure7</span></span>
<span id="cb15-182"><a href="#cb15-182" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Figure 7 - Histogram of Charging Rate (kw)"</span></span>
<span id="cb15-183"><a href="#cb15-183" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb15-184"><a href="#cb15-184" aria-hidden="true" tabindex="-1"></a>sns.histplot(data<span class="op">=</span>ev_charging,x<span class="op">=</span><span class="st">'Charging Rate (kW)'</span>)</span>
<span id="cb15-185"><a href="#cb15-185" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'</span><span class="ch">\n</span><span class="st">Figure 7 - Histogram of Charging Rate (kw)</span><span class="ch">\n</span><span class="st">'</span>)</span>
<span id="cb15-186"><a href="#cb15-186" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-187"><a href="#cb15-187" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-188"><a href="#cb15-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-191"><a href="#cb15-191" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-192"><a href="#cb15-192" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: Figure8</span></span>
<span id="cb15-193"><a href="#cb15-193" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Charging Station Location vs. Charging Duration (hours)"</span></span>
<span id="cb15-194"><a href="#cb15-194" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb15-195"><a href="#cb15-195" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>ev_charging,x<span class="op">=</span><span class="st">'Time of Day'</span>,y<span class="op">=</span><span class="st">'Charging Cost (USD)'</span>,hue<span class="op">=</span><span class="st">'Charger Type'</span>)</span>
<span id="cb15-196"><a href="#cb15-196" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'</span><span class="ch">\n</span><span class="st">Figure 8 - Charging Cost (USD) vs. Time of Day for Three Charger Types</span><span class="ch">\n</span><span class="st">'</span>)</span>
<span id="cb15-197"><a href="#cb15-197" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-198"><a href="#cb15-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-199"><a href="#cb15-199" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-200"><a href="#cb15-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-203"><a href="#cb15-203" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-204"><a href="#cb15-204" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: Figure9</span></span>
<span id="cb15-205"><a href="#cb15-205" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Charging Station Location vs. Charging Duration (hours)"</span></span>
<span id="cb15-206"><a href="#cb15-206" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb15-207"><a href="#cb15-207" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(data<span class="op">=</span>ev_charging,x<span class="op">=</span><span class="st">'Temperature (Â°C)'</span>,y<span class="op">=</span><span class="st">'Charging Rate (kW)'</span>,hue<span class="op">=</span><span class="st">'Vehicle Age (years)'</span>)</span>
<span id="cb15-208"><a href="#cb15-208" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'</span><span class="ch">\n</span><span class="st">Figure 9 - Charging RAte (kW) as a function of Temperature (C) for Vehicles between 0 and 10 years old</span><span class="ch">\n</span><span class="st">'</span>)</span>
<span id="cb15-209"><a href="#cb15-209" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-210"><a href="#cb15-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-211"><a href="#cb15-211" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-212"><a href="#cb15-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-213"><a href="#cb15-213" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Figure 10 - Seaborn Pair Plot for EV Charging Dataset Variables</span></span>
<span id="cb15-214"><a href="#cb15-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-217"><a href="#cb15-217" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-218"><a href="#cb15-218" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: Figure10</span></span>
<span id="cb15-219"><a href="#cb15-219" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Seaborn Pair Plot for EV Charging Dataset Variables"</span></span>
<span id="cb15-220"><a href="#cb15-220" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb15-221"><a href="#cb15-221" aria-hidden="true" tabindex="-1"></a>sns.pairplot(ev_charging,diag_kind<span class="op">=</span><span class="st">'hist'</span>,hue<span class="op">=</span><span class="st">'Vehicle Model'</span>)</span>
<span id="cb15-222"><a href="#cb15-222" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'</span><span class="ch">\n</span><span class="st">Figure 10 - Seaborn Pair Plot for EV Charging Dataset Variables</span><span class="ch">\n</span><span class="st">'</span>)</span>
<span id="cb15-223"><a href="#cb15-223" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-224"><a href="#cb15-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-225"><a href="#cb15-225" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-226"><a href="#cb15-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-227"><a href="#cb15-227" aria-hidden="true" tabindex="-1"></a><span class="fu">## Results</span></span>
<span id="cb15-228"><a href="#cb15-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-229"><a href="#cb15-229" aria-hidden="true" tabindex="-1"></a><span class="fu">### Statistical Review of the Data</span></span>
<span id="cb15-230"><a href="#cb15-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-231"><a href="#cb15-231" aria-hidden="true" tabindex="-1"></a>A statistical review of the dataset was completed using analysis of variance (ANOVA). ANOVA was selected to complete hypothesis testing where the test is an expansion of the two-sample t-test but allows for the mean of many subgroups to be compared and for differing sample size within each subgroup. The ANOVA assesses variance sum of squares within a subgroup vs. between subgroups.</span>
<span id="cb15-232"><a href="#cb15-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-233"><a href="#cb15-233" aria-hidden="true" tabindex="-1"></a>Each ANOVA includes a boxplot of the subgroups studied and a p-value. The ANOVA null hypothesis (Ho) is that all subgroups have a common mean value (p-value <span class="sc">\&gt;</span> alpha). The ANOVA alternative hypothesis (Ha) is that at least one subgroup has a unique mean (p-value <span class="sc">\&lt;</span> alpha). Alpha, the level of significance is typically 0.05 i.e. there is a 5% change of a Type I error - reject Ho when Ho is true - conclude there is a difference in mean when in fact there is no difference.</span>
<span id="cb15-234"><a href="#cb15-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-235"><a href="#cb15-235" aria-hidden="true" tabindex="-1"></a>The first hypothesis test completed was (i) Ho: all vehicle models have the same charging cost vs. Ha: at least one vehicle model has a unique charging cost, see Figure 11. The ANOVA for this hypothesis test yielded a p-value = 0.032, see Figure 11. As a result, Ho is rejected in favor of Ha and we conclude at least one vehicle has a unique charging cost. The ANOVA does not identify which subgroup, vehicle model, has the unique mean and graphically it is not visually apparent what vehicle model is unique, see Figure 11.</span>
<span id="cb15-236"><a href="#cb15-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-237"><a href="#cb15-237" aria-hidden="true" tabindex="-1"></a>The second hypothesis test completed was (ii) Ho: all charging station locations have the same mean charging cost vs. Ha: at least one charging station location has a unique mean charging cost, see Figure 12. The ANOVA yielded a p-value = 0.245 indicating no difference in mean charging cost between charging station locations, see Figure 12.</span>
<span id="cb15-238"><a href="#cb15-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-239"><a href="#cb15-239" aria-hidden="true" tabindex="-1"></a>The third hypothesis test completed examined (iii) Ho: all charger types have the same mean charging cost vs. Ha: at least one charger type has a unique mean charging cost, see Figure 13. The ANOVA yielded a p-value = 0.02 indicating at least one charger type has a unique mean charging cost. Reviewing the boxplot it is not visually apparent what charger type is unique, see Figure 13.</span>
<span id="cb15-240"><a href="#cb15-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-241"><a href="#cb15-241" aria-hidden="true" tabindex="-1"></a>To understand the relationship between charging temperature and charging cost a simple linear regression was completed, see Table 3. The linear regression completes the hypothesis test (iv) Ho: coefficient = 0 vs. Ha: coefficient is not equal to zero. The regression provided an equation for charging cost as a function of temperature, (cost (USD) = 21.7858 + 0.0459 <span class="sc">\*</span> Temperature(C)), see Table 3. A scatterplot of temperature and charging cost with the linear regression line is provided in Figure 14. The p-value for the regressor coefficient was less than alpha indicating there exists a statistically significant relationship and increasing temperature results in increased charging cost, see Table 3 and Figure 14.</span>
<span id="cb15-242"><a href="#cb15-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-243"><a href="#cb15-243" aria-hidden="true" tabindex="-1"></a>ANOVA was used to understand how (i) vehicle model, (ii) charging station locations, and (iii) charger type had an effect on charging cost. Charging cost appears to be influenced by vehicle model and charger type, see Figures 11 and 13 respectively. The simple linear regression highlighted the relationship between temperature and charging cost. The results of the statistical analysis helped inform the multivariate regression predictive model building efforts.</span>
<span id="cb15-244"><a href="#cb15-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-247"><a href="#cb15-247" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-248"><a href="#cb15-248" aria-hidden="true" tabindex="-1"></a><span class="co"># ANOVA - does vehicle model influence charging cost? </span></span>
<span id="cb15-249"><a href="#cb15-249" aria-hidden="true" tabindex="-1"></a><span class="co"># Ho: model does not effect charing cost</span></span>
<span id="cb15-250"><a href="#cb15-250" aria-hidden="true" tabindex="-1"></a><span class="co"># Ha: at least one model has a different charging cost </span></span>
<span id="cb15-251"><a href="#cb15-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-252"><a href="#cb15-252" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> ev_charging[<span class="st">'Vehicle Model'</span>].unique()</span>
<span id="cb15-253"><a href="#cb15-253" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model)</span>
<span id="cb15-254"><a href="#cb15-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-255"><a href="#cb15-255" aria-hidden="true" tabindex="-1"></a>ev_charging <span class="op">=</span> ev_charging.dropna()</span>
<span id="cb15-256"><a href="#cb15-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-257"><a href="#cb15-257" aria-hidden="true" tabindex="-1"></a>BMW <span class="op">=</span> ev_charging[ev_charging[<span class="st">'Vehicle Model'</span>] <span class="op">==</span> model[<span class="dv">0</span>]][<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-258"><a href="#cb15-258" aria-hidden="true" tabindex="-1"></a>Hyundai <span class="op">=</span> ev_charging[ev_charging[<span class="st">'Vehicle Model'</span>] <span class="op">==</span> model[<span class="dv">1</span>]][<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-259"><a href="#cb15-259" aria-hidden="true" tabindex="-1"></a>Chevy <span class="op">=</span> ev_charging[ev_charging[<span class="st">'Vehicle Model'</span>] <span class="op">==</span> model[<span class="dv">2</span>]][<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-260"><a href="#cb15-260" aria-hidden="true" tabindex="-1"></a>Nissan <span class="op">=</span> ev_charging[ev_charging[<span class="st">'Vehicle Model'</span>] <span class="op">==</span> model[<span class="dv">3</span>]][<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-261"><a href="#cb15-261" aria-hidden="true" tabindex="-1"></a>Tesla <span class="op">=</span> ev_charging[ev_charging[<span class="st">'Vehicle Model'</span>] <span class="op">==</span> model[<span class="dv">4</span>]][<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-262"><a href="#cb15-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-263"><a href="#cb15-263" aria-hidden="true" tabindex="-1"></a>f_statistic, p_value <span class="op">=</span> stats.f_oneway(BMW, Hyundai, Chevy, Nissan, Tesla)</span>
<span id="cb15-264"><a href="#cb15-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-265"><a href="#cb15-265" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-266"><a href="#cb15-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-269"><a href="#cb15-269" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-270"><a href="#cb15-270" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: Figure11</span></span>
<span id="cb15-271"><a href="#cb15-271" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "ANOVA vehicle model vs charging cost"</span></span>
<span id="cb15-272"><a href="#cb15-272" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb15-273"><a href="#cb15-273" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>ev_charging,x<span class="op">=</span><span class="st">'Vehicle Model'</span>,y<span class="op">=</span><span class="st">'Charging Cost (USD)'</span>)</span>
<span id="cb15-274"><a href="#cb15-274" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="ss">f'Figure 11 - Analysis of Variance: Charging Cost (USD) vs. Vehicle Model</span><span class="ch">\n</span><span class="ss">(P-value = </span><span class="sc">{</span>p_value<span class="sc">:3.3f}</span><span class="ss">)'</span>)</span>
<span id="cb15-275"><a href="#cb15-275" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-276"><a href="#cb15-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-277"><a href="#cb15-277" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-278"><a href="#cb15-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-281"><a href="#cb15-281" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-282"><a href="#cb15-282" aria-hidden="true" tabindex="-1"></a><span class="co"># ANOVA - does charging location influence charging cost? </span></span>
<span id="cb15-283"><a href="#cb15-283" aria-hidden="true" tabindex="-1"></a><span class="co"># Ho: charging location does not effect charing cost</span></span>
<span id="cb15-284"><a href="#cb15-284" aria-hidden="true" tabindex="-1"></a><span class="co"># Ha: at least one location  has a different charging cost </span></span>
<span id="cb15-285"><a href="#cb15-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-286"><a href="#cb15-286" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> ev_charging[<span class="st">'Charging Station Location'</span>].unique()</span>
<span id="cb15-287"><a href="#cb15-287" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model)</span>
<span id="cb15-288"><a href="#cb15-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-289"><a href="#cb15-289" aria-hidden="true" tabindex="-1"></a>ev_charging <span class="op">=</span> ev_charging.dropna()</span>
<span id="cb15-290"><a href="#cb15-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-291"><a href="#cb15-291" aria-hidden="true" tabindex="-1"></a>Houston <span class="op">=</span> ev_charging[ev_charging[<span class="st">'Charging Station Location'</span>] <span class="op">==</span> model[<span class="dv">0</span>]][<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-292"><a href="#cb15-292" aria-hidden="true" tabindex="-1"></a>SF <span class="op">=</span> ev_charging[ev_charging[<span class="st">'Charging Station Location'</span>] <span class="op">==</span> model[<span class="dv">1</span>]][<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-293"><a href="#cb15-293" aria-hidden="true" tabindex="-1"></a>LA <span class="op">=</span> ev_charging[ev_charging[<span class="st">'Charging Station Location'</span>] <span class="op">==</span> model[<span class="dv">2</span>]][<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-294"><a href="#cb15-294" aria-hidden="true" tabindex="-1"></a>Chicago <span class="op">=</span> ev_charging[ev_charging[<span class="st">'Charging Station Location'</span>] <span class="op">==</span> model[<span class="dv">3</span>]][<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-295"><a href="#cb15-295" aria-hidden="true" tabindex="-1"></a>NY <span class="op">=</span> ev_charging[ev_charging[<span class="st">'Charging Station Location'</span>] <span class="op">==</span> model[<span class="dv">4</span>]][<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-296"><a href="#cb15-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-297"><a href="#cb15-297" aria-hidden="true" tabindex="-1"></a>f_statistic, p_value <span class="op">=</span> stats.f_oneway(Houston, SF, LA, Chicago, NY)</span>
<span id="cb15-298"><a href="#cb15-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-299"><a href="#cb15-299" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'P-value:'</span>,p_value)</span>
<span id="cb15-300"><a href="#cb15-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-301"><a href="#cb15-301" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-302"><a href="#cb15-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-305"><a href="#cb15-305" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-306"><a href="#cb15-306" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: Figure12</span></span>
<span id="cb15-307"><a href="#cb15-307" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "ANOVA: Charging Location vs Charging Cost"</span></span>
<span id="cb15-308"><a href="#cb15-308" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb15-309"><a href="#cb15-309" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>ev_charging,x<span class="op">=</span><span class="st">'Charging Station Location'</span>,y<span class="op">=</span><span class="st">'Charging Cost (USD)'</span>)</span>
<span id="cb15-310"><a href="#cb15-310" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="ss">f'Figure 12 - Analysis of Variance: Charging Cost (USD) vs. Charging Location</span><span class="ch">\n</span><span class="ss">(P-value = </span><span class="sc">{</span>p_value<span class="sc">:3.3f}</span><span class="ss">)'</span>)</span>
<span id="cb15-311"><a href="#cb15-311" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-312"><a href="#cb15-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-313"><a href="#cb15-313" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-314"><a href="#cb15-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-317"><a href="#cb15-317" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-318"><a href="#cb15-318" aria-hidden="true" tabindex="-1"></a><span class="co"># ANOVA - does the type of charger influence charging cost? </span></span>
<span id="cb15-319"><a href="#cb15-319" aria-hidden="true" tabindex="-1"></a><span class="co"># Ho: type of charger does not effect charing cost</span></span>
<span id="cb15-320"><a href="#cb15-320" aria-hidden="true" tabindex="-1"></a><span class="co"># Ha: at least one charger type has a uniqeu or different mean charging cost </span></span>
<span id="cb15-321"><a href="#cb15-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-322"><a href="#cb15-322" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> ev_charging[<span class="st">'Charger Type'</span>].unique()</span>
<span id="cb15-323"><a href="#cb15-323" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model)</span>
<span id="cb15-324"><a href="#cb15-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-325"><a href="#cb15-325" aria-hidden="true" tabindex="-1"></a>ev_charging <span class="op">=</span> ev_charging.dropna()</span>
<span id="cb15-326"><a href="#cb15-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-327"><a href="#cb15-327" aria-hidden="true" tabindex="-1"></a>FAST <span class="op">=</span> ev_charging[ev_charging[<span class="st">'Charger Type'</span>] <span class="op">==</span> model[<span class="dv">0</span>]][<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-328"><a href="#cb15-328" aria-hidden="true" tabindex="-1"></a>Level_1 <span class="op">=</span> ev_charging[ev_charging[<span class="st">'Charger Type'</span>] <span class="op">==</span> model[<span class="dv">1</span>]][<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-329"><a href="#cb15-329" aria-hidden="true" tabindex="-1"></a>Level_2 <span class="op">=</span> ev_charging[ev_charging[<span class="st">'Charger Type'</span>] <span class="op">==</span> model[<span class="dv">2</span>]][<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-330"><a href="#cb15-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-331"><a href="#cb15-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-332"><a href="#cb15-332" aria-hidden="true" tabindex="-1"></a>f_statistic, p_value <span class="op">=</span> stats.f_oneway(FAST, Level_1,Level_2)</span>
<span id="cb15-333"><a href="#cb15-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-334"><a href="#cb15-334" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'P-value:'</span>,p_value)</span>
<span id="cb15-335"><a href="#cb15-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-336"><a href="#cb15-336" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-337"><a href="#cb15-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-340"><a href="#cb15-340" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-341"><a href="#cb15-341" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: Figure13</span></span>
<span id="cb15-342"><a href="#cb15-342" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "ANOVA: Charger Type vs Charging Cost"</span></span>
<span id="cb15-343"><a href="#cb15-343" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb15-344"><a href="#cb15-344" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>ev_charging,x<span class="op">=</span><span class="st">'Charger Type'</span>,y<span class="op">=</span><span class="st">'Charging Cost (USD)'</span>)</span>
<span id="cb15-345"><a href="#cb15-345" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="ss">f'Figure 13: ANOVA - Charger Type vs. Charging Cost (USD)</span><span class="ch">\n</span><span class="ss">(p-value = </span><span class="sc">{</span>p_value<span class="sc">:3.2f}</span><span class="ss">)'</span>)</span>
<span id="cb15-346"><a href="#cb15-346" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-347"><a href="#cb15-347" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-348"><a href="#cb15-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-349"><a href="#cb15-349" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Table 3 - Linear Regression: Charging Cost (USD) as a function of Temperature (C)</span></span>
<span id="cb15-350"><a href="#cb15-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-353"><a href="#cb15-353" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-354"><a href="#cb15-354" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression - does charging temperature have an effect on charging cost? </span></span>
<span id="cb15-355"><a href="#cb15-355" aria-hidden="true" tabindex="-1"></a><span class="co"># Ho: linear regression coefficient = 0</span></span>
<span id="cb15-356"><a href="#cb15-356" aria-hidden="true" tabindex="-1"></a><span class="co"># Ha: linear regression coefficient is not equal to 0</span></span>
<span id="cb15-357"><a href="#cb15-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-358"><a href="#cb15-358" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> ev_charging[[<span class="st">'Temperature (Â°C)'</span>]]</span>
<span id="cb15-359"><a href="#cb15-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-360"><a href="#cb15-360" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> ev_charging[<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-361"><a href="#cb15-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-362"><a href="#cb15-362" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> sm.add_constant(X)</span>
<span id="cb15-363"><a href="#cb15-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-364"><a href="#cb15-364" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> sm.OLS(y,X).fit()</span>
<span id="cb15-365"><a href="#cb15-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-366"><a href="#cb15-366" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model.summary())</span>
<span id="cb15-367"><a href="#cb15-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-368"><a href="#cb15-368" aria-hidden="true" tabindex="-1"></a>p_value_temp <span class="op">=</span> model.pvalues[<span class="st">'Temperature (Â°C)'</span>]</span>
<span id="cb15-369"><a href="#cb15-369" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">P-value for Temperature (Â°C): </span><span class="sc">{</span>p_value_temp<span class="sc">:.5f}</span><span class="ss">"</span>)</span>
<span id="cb15-370"><a href="#cb15-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-371"><a href="#cb15-371" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-372"><a href="#cb15-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-375"><a href="#cb15-375" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-376"><a href="#cb15-376" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: Figure14</span></span>
<span id="cb15-377"><a href="#cb15-377" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Linear Regression: Temperature vs Charging Cost"</span></span>
<span id="cb15-378"><a href="#cb15-378" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">6</span>))</span>
<span id="cb15-379"><a href="#cb15-379" aria-hidden="true" tabindex="-1"></a>sns.regplot(</span>
<span id="cb15-380"><a href="#cb15-380" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>ev_charging, </span>
<span id="cb15-381"><a href="#cb15-381" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'Temperature (Â°C)'</span>, </span>
<span id="cb15-382"><a href="#cb15-382" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'Charging Cost (USD)'</span>, </span>
<span id="cb15-383"><a href="#cb15-383" aria-hidden="true" tabindex="-1"></a>    ci<span class="op">=</span><span class="va">None</span>,      </span>
<span id="cb15-384"><a href="#cb15-384" aria-hidden="true" tabindex="-1"></a>    line_kws<span class="op">=</span>{<span class="st">"color"</span>: <span class="st">"red"</span>},  </span>
<span id="cb15-385"><a href="#cb15-385" aria-hidden="true" tabindex="-1"></a>    scatter_kws<span class="op">=</span>{<span class="st">"alpha"</span>: <span class="fl">0.6</span>} </span>
<span id="cb15-386"><a href="#cb15-386" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-387"><a href="#cb15-387" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Figure 14: Linear Regression - Charging Cost vs Temperature (C)</span><span class="ch">\n</span><span class="st">regression equation: Charging Cost (USD) = 21.7858 + 0.0459* Temperature (C)</span><span class="ch">\n</span><span class="st">Regressor Coefficient P-value = 0.035"</span>,fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb15-388"><a href="#cb15-388" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Temperature (Â°C)"</span>)</span>
<span id="cb15-389"><a href="#cb15-389" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Charging Cost (USD)"</span>)</span>
<span id="cb15-390"><a href="#cb15-390" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-391"><a href="#cb15-391" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-392"><a href="#cb15-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-393"><a href="#cb15-393" aria-hidden="true" tabindex="-1"></a><span class="fu">### Predictive Model Building</span></span>
<span id="cb15-394"><a href="#cb15-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-395"><a href="#cb15-395" aria-hidden="true" tabindex="-1"></a>An attempt was made to build a predictive model of charging cost as a function of the factors studied within the dataset using multivariate regression analysis. The multivariate regression analysis was completed in three iterations. The first iteration included all factors in the dataset, see Table 4a and 4b. The second iteration included only those terms that appear to be statistically significant, to improve the R-sq-adjusted value by removing non-significant parameters from the model, see Table 5. The third iteration was a refinement of the regression model, again reducing the number of terms to attempt a model with a high value for R-sq-adjusted, see Table 6.</span>
<span id="cb15-396"><a href="#cb15-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-397"><a href="#cb15-397" aria-hidden="true" tabindex="-1"></a>The initial regression model included all the terms within the EV charging dataset, see Table 4b. The categorical variables were transformed to numerical values using one-hot-encoding, see Table 4b. That first model provided an empirical model of charging cost as a function of all variables studied with an R-sq-adjusted of 0.017 meaning the model explained 1.7% of the variance within the dataset.</span>
<span id="cb15-398"><a href="#cb15-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-399"><a href="#cb15-399" aria-hidden="true" tabindex="-1"></a>To improve the R-sq-adjusted value a majority of the non-significant factors were removed from the model, see Table 5. This second model provided an R-sq-adjusted value of 0.021, that is the model explained 2.1% of the variance within the dataset.</span>
<span id="cb15-400"><a href="#cb15-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-401"><a href="#cb15-401" aria-hidden="true" tabindex="-1"></a>A third multivariate regression model was attempted, again removing non-significant (p-value <span class="sc">\&gt;</span> 0.05) terms from the model in an attempt to improve R-sq-adjusted by including only statistically significant terms in the model, see Table 6. The third model yielding an R-sq-adjusted = 0.018 - typically an R-sq-adj value greater than 0.7 or 70% is desired.</span>
<span id="cb15-402"><a href="#cb15-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-403"><a href="#cb15-403" aria-hidden="true" tabindex="-1"></a>The results of the multivariate regression analysis were disappointing, none of the model attempts yielded an R-sq-adjusted above 50%. As a result, the support vector regression (SVR) algorithm was attempted to predict charging cost as a function of the other variables or columns in the dataset, see Tables 7, 8 and 9.The initial SVR model included only numerical factors and provided an R-sq-adjusted of -0.25, see Table 7. The second SVM attempt included all factors, numerical and categorical, one-hot-encoding was used to transform categorical factors to numerical, and grid search employed to optimize the RBF kernel hyper-parameters, see Table 8. A third SVM attempt also included all factors and grid search employed to optimize the polynomial kernel, see Table 9. In both SVR's the data was scaled to ensure a uniform range for each variable studied. However, the second model, even with grid search, yielded a low value for R-sq-adjusted of -0.39 indicating the model was no better than a simple linear regression.</span>
<span id="cb15-404"><a href="#cb15-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-405"><a href="#cb15-405" aria-hidden="true" tabindex="-1"></a>The empirical modeling effort included multivariate regression and support vector regression analysis. Other machine learning algorithms were not attempted because the response, charging cost, was a continues variable and not binary or categorical; as a result, logistic regression nor nearest neighbors were applied. The best performing model was a multivariate regression analysis that included only statistically significant terms and provided an R-sq = 0.041 and R-sq-adjusted = 0.021. The results of the predictive model building were disappointing and may need an expert review to ensure no technical errors in the code were made.</span>
<span id="cb15-406"><a href="#cb15-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-409"><a href="#cb15-409" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-410"><a href="#cb15-410" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb15-411"><a href="#cb15-411" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb15-412"><a href="#cb15-412" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> OneHotEncoder, StandardScaler</span>
<span id="cb15-413"><a href="#cb15-413" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.compose <span class="im">import</span> ColumnTransformer</span>
<span id="cb15-414"><a href="#cb15-414" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.pipeline <span class="im">import</span> Pipeline</span>
<span id="cb15-415"><a href="#cb15-415" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_squared_error, r2_score</span>
<span id="cb15-416"><a href="#cb15-416" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> PolynomialFeatures</span>
<span id="cb15-417"><a href="#cb15-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-418"><a href="#cb15-418" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-419"><a href="#cb15-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-422"><a href="#cb15-422" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-423"><a href="#cb15-423" aria-hidden="true" tabindex="-1"></a>ev_charging <span class="op">=</span> ev_charging.dropna()</span>
<span id="cb15-424"><a href="#cb15-424" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-425"><a href="#cb15-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-426"><a href="#cb15-426" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Table 4a - Initial Multivariable Regression Analysis: Charging Cost (USD) MSE and R-squared</span></span>
<span id="cb15-427"><a href="#cb15-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-430"><a href="#cb15-430" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-431"><a href="#cb15-431" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> ev_charging[[<span class="st">'Vehicle Model'</span>,<span class="st">'Battery Capacity (kWh)'</span>,<span class="st">'Charging Station Location'</span>,<span class="st">'Energy Consumed (kWh)'</span>,<span class="st">'Charging Duration (hours)'</span>,<span class="st">'Charging Rate (kW)'</span>,<span class="st">'Time of Day'</span>,<span class="st">'Day of Week'</span>,<span class="st">'State of Charge (Start %)'</span>,<span class="st">'State of Charge (End %)'</span>,<span class="st">'Distance Driven (since last charge) (km)'</span>,<span class="st">'Temperature (Â°C)'</span>,<span class="st">'Vehicle Age (years)'</span>,<span class="st">'Charger Type'</span>,<span class="st">'User Type'</span>]]</span>
<span id="cb15-432"><a href="#cb15-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-433"><a href="#cb15-433" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> ev_charging[<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-434"><a href="#cb15-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-435"><a href="#cb15-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-436"><a href="#cb15-436" aria-hidden="true" tabindex="-1"></a>num_variables <span class="op">=</span> [<span class="st">'Battery Capacity (kWh)'</span>,<span class="st">'Energy Consumed (kWh)'</span>,<span class="st">'Charging Duration (hours)'</span>,<span class="st">'Charging Rate (kW)'</span>,<span class="st">'State of Charge (Start %)'</span>,<span class="st">'State of Charge (End %)'</span>,<span class="st">'Distance Driven (since last charge) (km)'</span>,<span class="st">'Temperature (Â°C)'</span>,<span class="st">'Vehicle Age (years)'</span>]</span>
<span id="cb15-437"><a href="#cb15-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-438"><a href="#cb15-438" aria-hidden="true" tabindex="-1"></a>cat_variables <span class="op">=</span> [<span class="st">'Vehicle Model'</span>,<span class="st">'Charging Station Location'</span>,<span class="st">'Time of Day'</span>,<span class="st">'Day of Week'</span>,<span class="st">'Charger Type'</span>,<span class="st">'User Type'</span>]</span>
<span id="cb15-439"><a href="#cb15-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-440"><a href="#cb15-440" aria-hidden="true" tabindex="-1"></a><span class="co"># Preprocessing for numerical and categorical features</span></span>
<span id="cb15-441"><a href="#cb15-441" aria-hidden="true" tabindex="-1"></a>preprocessor <span class="op">=</span> ColumnTransformer(</span>
<span id="cb15-442"><a href="#cb15-442" aria-hidden="true" tabindex="-1"></a>    transformers<span class="op">=</span>[</span>
<span id="cb15-443"><a href="#cb15-443" aria-hidden="true" tabindex="-1"></a>        (<span class="st">'num'</span>, StandardScaler(), num_variables),</span>
<span id="cb15-444"><a href="#cb15-444" aria-hidden="true" tabindex="-1"></a>        (<span class="st">'cat'</span>, OneHotEncoder(handle_unknown<span class="op">=</span><span class="st">'ignore'</span>), cat_variables)</span>
<span id="cb15-445"><a href="#cb15-445" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb15-446"><a href="#cb15-446" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-447"><a href="#cb15-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-448"><a href="#cb15-448" aria-hidden="true" tabindex="-1"></a><span class="co"># defining the model architecture </span></span>
<span id="cb15-449"><a href="#cb15-449" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> Pipeline(steps<span class="op">=</span>[</span>
<span id="cb15-450"><a href="#cb15-450" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'preprocessor'</span>, preprocessor),</span>
<span id="cb15-451"><a href="#cb15-451" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'regressor'</span>, LinearRegression())</span>
<span id="cb15-452"><a href="#cb15-452" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb15-453"><a href="#cb15-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-454"><a href="#cb15-454" aria-hidden="true" tabindex="-1"></a><span class="co"># Split the data into train and test sets</span></span>
<span id="cb15-455"><a href="#cb15-455" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb15-456"><a href="#cb15-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-457"><a href="#cb15-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-458"><a href="#cb15-458" aria-hidden="true" tabindex="-1"></a><span class="co"># Update pipeline with scaled target</span></span>
<span id="cb15-459"><a href="#cb15-459" aria-hidden="true" tabindex="-1"></a>model.fit(X_train, y_train)</span>
<span id="cb15-460"><a href="#cb15-460" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X_test)</span>
<span id="cb15-461"><a href="#cb15-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-462"><a href="#cb15-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-463"><a href="#cb15-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-464"><a href="#cb15-464" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate the model</span></span>
<span id="cb15-465"><a href="#cb15-465" aria-hidden="true" tabindex="-1"></a>mse <span class="op">=</span> mean_squared_error(y_test, y_pred)</span>
<span id="cb15-466"><a href="#cb15-466" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y_test, y_pred)</span>
<span id="cb15-467"><a href="#cb15-467" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Table 4a - Initial Multivariable Regression Analysis: Charging Cost (USD) MSE and R-squared'</span>)</span>
<span id="cb15-468"><a href="#cb15-468" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Mean Squared Error: </span><span class="sc">{</span>mse<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb15-469"><a href="#cb15-469" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"R-squared: </span><span class="sc">{</span>r2<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb15-470"><a href="#cb15-470" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-471"><a href="#cb15-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-472"><a href="#cb15-472" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Table 4b - Initial Multivariable Regression Analysis: Charging Cost (USD) Model Summary</span></span>
<span id="cb15-473"><a href="#cb15-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-476"><a href="#cb15-476" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-477"><a href="#cb15-477" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> ev_charging[[<span class="st">'Vehicle Model'</span>,<span class="st">'Battery Capacity (kWh)'</span>,<span class="st">'Charging Station Location'</span>,<span class="st">'Energy Consumed (kWh)'</span>,<span class="st">'Charging Duration (hours)'</span>,<span class="st">'Charging Rate (kW)'</span>,<span class="st">'Time of Day'</span>,<span class="st">'Day of Week'</span>,<span class="st">'State of Charge (Start %)'</span>,<span class="st">'State of Charge (End %)'</span>,<span class="st">'Distance Driven (since last charge) (km)'</span>,<span class="st">'Temperature (Â°C)'</span>,<span class="st">'Vehicle Age (years)'</span>,<span class="st">'Charger Type'</span>,<span class="st">'User Type'</span>]]</span>
<span id="cb15-478"><a href="#cb15-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-479"><a href="#cb15-479" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> ev_charging[<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-480"><a href="#cb15-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-481"><a href="#cb15-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-482"><a href="#cb15-482" aria-hidden="true" tabindex="-1"></a><span class="co"># one-hot-encoding of categorical variables </span></span>
<span id="cb15-483"><a href="#cb15-483" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> pd.get_dummies(X, drop_first<span class="op">=</span><span class="va">True</span>, dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb15-484"><a href="#cb15-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-485"><a href="#cb15-485" aria-hidden="true" tabindex="-1"></a><span class="co"># adding a constant to enable calc. of intercept </span></span>
<span id="cb15-486"><a href="#cb15-486" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> sm.add_constant(X)</span>
<span id="cb15-487"><a href="#cb15-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-488"><a href="#cb15-488" aria-hidden="true" tabindex="-1"></a><span class="co"># fititng the model </span></span>
<span id="cb15-489"><a href="#cb15-489" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> sm.OLS(y,X).fit()</span>
<span id="cb15-490"><a href="#cb15-490" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Table 4b - Initial Multivariable Regression Analysis: Charging Cost (USD) Model Summary'</span>)</span>
<span id="cb15-491"><a href="#cb15-491" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model.summary())</span>
<span id="cb15-492"><a href="#cb15-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-493"><a href="#cb15-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-494"><a href="#cb15-494" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-495"><a href="#cb15-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-496"><a href="#cb15-496" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Table 5 - Second Iteration, Statistically Significant Factors, Multivariable Regression Analysis</span></span>
<span id="cb15-497"><a href="#cb15-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-500"><a href="#cb15-500" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-501"><a href="#cb15-501" aria-hidden="true" tabindex="-1"></a><span class="co">## removing non-significant terms to improve R2_adj</span></span>
<span id="cb15-502"><a href="#cb15-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-503"><a href="#cb15-503" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> ev_charging[[<span class="st">'Vehicle Model'</span>,<span class="st">'Charging Station Location'</span>,<span class="st">'Time of Day'</span>,<span class="st">'Day of Week'</span>,<span class="st">'State of Charge (End %)'</span>,<span class="st">'Temperature (Â°C)'</span>,<span class="st">'Charger Type'</span>,<span class="st">'User Type'</span>]]</span>
<span id="cb15-504"><a href="#cb15-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-505"><a href="#cb15-505" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> ev_charging[<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-506"><a href="#cb15-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-507"><a href="#cb15-507" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> pd.get_dummies(X, drop_first<span class="op">=</span><span class="va">True</span>, dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb15-508"><a href="#cb15-508" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> sm.add_constant(X)</span>
<span id="cb15-509"><a href="#cb15-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-510"><a href="#cb15-510" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> sm.OLS(y,X).fit()</span>
<span id="cb15-511"><a href="#cb15-511" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Table 5 - Second Iteration, Statistically Significant Factors, Multivariable Regression Analysis'</span>)</span>
<span id="cb15-512"><a href="#cb15-512" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model.summary())</span>
<span id="cb15-513"><a href="#cb15-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-514"><a href="#cb15-514" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-515"><a href="#cb15-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-516"><a href="#cb15-516" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Table 6 - Third Iteration, Statistically Significant Factors, Multivariable Regression Analysis</span></span>
<span id="cb15-517"><a href="#cb15-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-520"><a href="#cb15-520" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-521"><a href="#cb15-521" aria-hidden="true" tabindex="-1"></a><span class="co">## removing additonal non-significant terms to improve R2_adj</span></span>
<span id="cb15-522"><a href="#cb15-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-523"><a href="#cb15-523" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> ev_charging[[<span class="st">'Vehicle Model'</span>,<span class="st">'Charging Station Location'</span>,<span class="st">'State of Charge (End %)'</span>,<span class="st">'Temperature (Â°C)'</span>,<span class="st">'Charger Type'</span>,<span class="st">'User Type'</span>]]</span>
<span id="cb15-524"><a href="#cb15-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-525"><a href="#cb15-525" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> ev_charging[<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-526"><a href="#cb15-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-527"><a href="#cb15-527" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> pd.get_dummies(X, drop_first<span class="op">=</span><span class="va">True</span>, dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb15-528"><a href="#cb15-528" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> sm.add_constant(X)</span>
<span id="cb15-529"><a href="#cb15-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-530"><a href="#cb15-530" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> sm.OLS(y,X).fit()</span>
<span id="cb15-531"><a href="#cb15-531" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Table 6 - Third Iteration, Statistically Significant Factors, Multivariable Regression Analysis'</span>)</span>
<span id="cb15-532"><a href="#cb15-532" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model.summary())</span>
<span id="cb15-533"><a href="#cb15-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-534"><a href="#cb15-534" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-535"><a href="#cb15-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-536"><a href="#cb15-536" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Table 7 - Support Vector Machine: All Factors with One-Hot-Encoding and Grid Search Linear, RBF, and Polynomial Kernels</span></span>
<span id="cb15-537"><a href="#cb15-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-540"><a href="#cb15-540" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-541"><a href="#cb15-541" aria-hidden="true" tabindex="-1"></a><span class="co"># initial attempt at a SVM model to improve the model performance vs. multivariable regression </span></span>
<span id="cb15-542"><a href="#cb15-542" aria-hidden="true" tabindex="-1"></a><span class="co"># using Support Vector Regression (SVR)</span></span>
<span id="cb15-543"><a href="#cb15-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-544"><a href="#cb15-544" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb15-545"><a href="#cb15-545" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split, GridSearchCV</span>
<span id="cb15-546"><a href="#cb15-546" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.svm <span class="im">import</span> SVR</span>
<span id="cb15-547"><a href="#cb15-547" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler</span>
<span id="cb15-548"><a href="#cb15-548" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_squared_error, r2_score</span>
<span id="cb15-549"><a href="#cb15-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-550"><a href="#cb15-550" aria-hidden="true" tabindex="-1"></a><span class="co"># Features and target</span></span>
<span id="cb15-551"><a href="#cb15-551" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> ev_charging[[<span class="st">'Vehicle Model'</span>, <span class="st">'Battery Capacity (kWh)'</span>, <span class="st">'Charging Station Location'</span>,</span>
<span id="cb15-552"><a href="#cb15-552" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'Energy Consumed (kWh)'</span>, <span class="st">'Charging Duration (hours)'</span>, <span class="st">'Charging Rate (kW)'</span>,</span>
<span id="cb15-553"><a href="#cb15-553" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'Time of Day'</span>, <span class="st">'Day of Week'</span>, <span class="st">'State of Charge (Start %)'</span>,</span>
<span id="cb15-554"><a href="#cb15-554" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'State of Charge (End %)'</span>, <span class="st">'Distance Driven (since last charge) (km)'</span>,</span>
<span id="cb15-555"><a href="#cb15-555" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'Temperature (Â°C)'</span>, <span class="st">'Vehicle Age (years)'</span>, <span class="st">'Charger Type'</span>, <span class="st">'User Type'</span>]]</span>
<span id="cb15-556"><a href="#cb15-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-557"><a href="#cb15-557" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> ev_charging[<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-558"><a href="#cb15-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-559"><a href="#cb15-559" aria-hidden="true" tabindex="-1"></a><span class="co"># One-hot encoding of categorical variables</span></span>
<span id="cb15-560"><a href="#cb15-560" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> pd.get_dummies(X, drop_first<span class="op">=</span><span class="va">True</span>, dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb15-561"><a href="#cb15-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-562"><a href="#cb15-562" aria-hidden="true" tabindex="-1"></a><span class="co"># Splitting data into training and testing sets</span></span>
<span id="cb15-563"><a href="#cb15-563" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb15-564"><a href="#cb15-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-565"><a href="#cb15-565" aria-hidden="true" tabindex="-1"></a><span class="co"># Scaling the data</span></span>
<span id="cb15-566"><a href="#cb15-566" aria-hidden="true" tabindex="-1"></a>scaler_X <span class="op">=</span> StandardScaler()</span>
<span id="cb15-567"><a href="#cb15-567" aria-hidden="true" tabindex="-1"></a>scaler_y <span class="op">=</span> StandardScaler()</span>
<span id="cb15-568"><a href="#cb15-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-569"><a href="#cb15-569" aria-hidden="true" tabindex="-1"></a>X_train_scaled <span class="op">=</span> scaler_X.fit_transform(X_train)</span>
<span id="cb15-570"><a href="#cb15-570" aria-hidden="true" tabindex="-1"></a>X_test_scaled <span class="op">=</span> scaler_X.transform(X_test)</span>
<span id="cb15-571"><a href="#cb15-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-572"><a href="#cb15-572" aria-hidden="true" tabindex="-1"></a>y_train_scaled <span class="op">=</span> scaler_y.fit_transform(y_train.values.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)).ravel()</span>
<span id="cb15-573"><a href="#cb15-573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-574"><a href="#cb15-574" aria-hidden="true" tabindex="-1"></a><span class="co"># SVR with Grid Search parameters</span></span>
<span id="cb15-575"><a href="#cb15-575" aria-hidden="true" tabindex="-1"></a>svr <span class="op">=</span> SVR()</span>
<span id="cb15-576"><a href="#cb15-576" aria-hidden="true" tabindex="-1"></a>param_grid <span class="op">=</span> {</span>
<span id="cb15-577"><a href="#cb15-577" aria-hidden="true" tabindex="-1"></a>    <span class="st">'kernel'</span>: [<span class="st">'linear'</span>, <span class="st">'rbf'</span>, <span class="st">'poly'</span>],</span>
<span id="cb15-578"><a href="#cb15-578" aria-hidden="true" tabindex="-1"></a>    <span class="st">'C'</span>: [<span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">10</span>],</span>
<span id="cb15-579"><a href="#cb15-579" aria-hidden="true" tabindex="-1"></a>    <span class="st">'epsilon'</span>: [<span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="dv">1</span>],</span>
<span id="cb15-580"><a href="#cb15-580" aria-hidden="true" tabindex="-1"></a>    <span class="st">'gamma'</span>: [<span class="st">'scale'</span>, <span class="st">'auto'</span>]</span>
<span id="cb15-581"><a href="#cb15-581" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-582"><a href="#cb15-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-583"><a href="#cb15-583" aria-hidden="true" tabindex="-1"></a><span class="co"># Grid Search</span></span>
<span id="cb15-584"><a href="#cb15-584" aria-hidden="true" tabindex="-1"></a>grid_search <span class="op">=</span> GridSearchCV(svr, param_grid, cv<span class="op">=</span><span class="dv">5</span>, scoring<span class="op">=</span><span class="st">'r2'</span>, verbose<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb15-585"><a href="#cb15-585" aria-hidden="true" tabindex="-1"></a>grid_search.fit(X_train_scaled, y_train_scaled)</span>
<span id="cb15-586"><a href="#cb15-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-587"><a href="#cb15-587" aria-hidden="true" tabindex="-1"></a><span class="co"># Best estimator</span></span>
<span id="cb15-588"><a href="#cb15-588" aria-hidden="true" tabindex="-1"></a>best_model <span class="op">=</span> grid_search.best_estimator_</span>
<span id="cb15-589"><a href="#cb15-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-590"><a href="#cb15-590" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict on test data</span></span>
<span id="cb15-591"><a href="#cb15-591" aria-hidden="true" tabindex="-1"></a>y_pred_scaled <span class="op">=</span> best_model.predict(X_test_scaled)</span>
<span id="cb15-592"><a href="#cb15-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-593"><a href="#cb15-593" aria-hidden="true" tabindex="-1"></a><span class="co"># Inverse transform predictions and target</span></span>
<span id="cb15-594"><a href="#cb15-594" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> scaler_y.inverse_transform(y_pred_scaled.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)).ravel()</span>
<span id="cb15-595"><a href="#cb15-595" aria-hidden="true" tabindex="-1"></a>y_test_inv <span class="op">=</span> y_test.values  <span class="co"># Original y_test for evaluation</span></span>
<span id="cb15-596"><a href="#cb15-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-597"><a href="#cb15-597" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate metrics</span></span>
<span id="cb15-598"><a href="#cb15-598" aria-hidden="true" tabindex="-1"></a>mse <span class="op">=</span> mean_squared_error(y_test_inv, y_pred)</span>
<span id="cb15-599"><a href="#cb15-599" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y_test_inv, y_pred)</span>
<span id="cb15-600"><a href="#cb15-600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-601"><a href="#cb15-601" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate Adjusted R-squared</span></span>
<span id="cb15-602"><a href="#cb15-602" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> X_test.shape[<span class="dv">0</span>]  <span class="co"># Number of test samples</span></span>
<span id="cb15-603"><a href="#cb15-603" aria-hidden="true" tabindex="-1"></a>k <span class="op">=</span> X_test.shape[<span class="dv">1</span>]  <span class="co"># Number of predictor variables</span></span>
<span id="cb15-604"><a href="#cb15-604" aria-hidden="true" tabindex="-1"></a>r2_adjusted <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> ((<span class="dv">1</span> <span class="op">-</span> r2) <span class="op">*</span> (n <span class="op">-</span> <span class="dv">1</span>) <span class="op">/</span> (n <span class="op">-</span> k <span class="op">-</span> <span class="dv">1</span>))</span>
<span id="cb15-605"><a href="#cb15-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-606"><a href="#cb15-606" aria-hidden="true" tabindex="-1"></a><span class="co"># Print Results</span></span>
<span id="cb15-607"><a href="#cb15-607" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"===== Kernel: linear, rbf, poly: Model Summary ====="</span>)</span>
<span id="cb15-608"><a href="#cb15-608" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Best Hyperparameters:"</span>, grid_search.best_params_)</span>
<span id="cb15-609"><a href="#cb15-609" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Performance Metrics:"</span>)</span>
<span id="cb15-610"><a href="#cb15-610" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Mean Squared Error (MSE): </span><span class="sc">{</span>mse<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb15-611"><a href="#cb15-611" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"RÂ² Score: </span><span class="sc">{</span>r2<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb15-612"><a href="#cb15-612" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Adjusted RÂ² Score: </span><span class="sc">{</span>r2_adjusted<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb15-613"><a href="#cb15-613" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Best Estimator:"</span>)</span>
<span id="cb15-614"><a href="#cb15-614" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(best_model)</span>
<span id="cb15-615"><a href="#cb15-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-616"><a href="#cb15-616" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-617"><a href="#cb15-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-618"><a href="#cb15-618" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Table 8 - Support Vector Machine: All Factors with One-Hot-Encoding and Grid Search RBF Kernel Hyperparameters</span></span>
<span id="cb15-619"><a href="#cb15-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-622"><a href="#cb15-622" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-623"><a href="#cb15-623" aria-hidden="true" tabindex="-1"></a><span class="co"># trying to optimize the SVM RBF kernal to achieve a half decent model </span></span>
<span id="cb15-624"><a href="#cb15-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-625"><a href="#cb15-625" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> GridSearchCV</span>
<span id="cb15-626"><a href="#cb15-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-627"><a href="#cb15-627" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> ev_charging[[<span class="st">'Vehicle Model'</span>,<span class="st">'Battery Capacity (kWh)'</span>,<span class="st">'Charging Station Location'</span>,</span>
<span id="cb15-628"><a href="#cb15-628" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'Energy Consumed (kWh)'</span>,<span class="st">'Charging Duration (hours)'</span>,<span class="st">'Charging Rate (kW)'</span>,</span>
<span id="cb15-629"><a href="#cb15-629" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'Time of Day'</span>,<span class="st">'Day of Week'</span>,<span class="st">'State of Charge (Start %)'</span>,</span>
<span id="cb15-630"><a href="#cb15-630" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'State of Charge (End %)'</span>,<span class="st">'Distance Driven (since last charge) (km)'</span>,</span>
<span id="cb15-631"><a href="#cb15-631" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'Temperature (Â°C)'</span>,<span class="st">'Vehicle Age (years)'</span>,<span class="st">'Charger Type'</span>,<span class="st">'User Type'</span>]]</span>
<span id="cb15-632"><a href="#cb15-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-633"><a href="#cb15-633" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> ev_charging[<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-634"><a href="#cb15-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-635"><a href="#cb15-635" aria-hidden="true" tabindex="-1"></a><span class="co"># one-hot-encoding of categorical variables </span></span>
<span id="cb15-636"><a href="#cb15-636" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> pd.get_dummies(X, drop_first<span class="op">=</span><span class="va">True</span>, dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb15-637"><a href="#cb15-637" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-638"><a href="#cb15-638" aria-hidden="true" tabindex="-1"></a><span class="co"># splitting data in to training and test datasets </span></span>
<span id="cb15-639"><a href="#cb15-639" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb15-640"><a href="#cb15-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-641"><a href="#cb15-641" aria-hidden="true" tabindex="-1"></a><span class="co"># Scaling the data</span></span>
<span id="cb15-642"><a href="#cb15-642" aria-hidden="true" tabindex="-1"></a>scaler_X <span class="op">=</span> StandardScaler()</span>
<span id="cb15-643"><a href="#cb15-643" aria-hidden="true" tabindex="-1"></a>scaler_y <span class="op">=</span> StandardScaler()</span>
<span id="cb15-644"><a href="#cb15-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-645"><a href="#cb15-645" aria-hidden="true" tabindex="-1"></a>X_train_scaled <span class="op">=</span> scaler_X.fit_transform(X_train)</span>
<span id="cb15-646"><a href="#cb15-646" aria-hidden="true" tabindex="-1"></a>X_test_scaled <span class="op">=</span> scaler_X.transform(X_test)</span>
<span id="cb15-647"><a href="#cb15-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-648"><a href="#cb15-648" aria-hidden="true" tabindex="-1"></a>y_train_scaled <span class="op">=</span> scaler_y.fit_transform(y_train.values.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)).ravel()</span>
<span id="cb15-649"><a href="#cb15-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-650"><a href="#cb15-650" aria-hidden="true" tabindex="-1"></a><span class="co"># SVM grid search parameters </span></span>
<span id="cb15-651"><a href="#cb15-651" aria-hidden="true" tabindex="-1"></a>svr <span class="op">=</span> SVR()</span>
<span id="cb15-652"><a href="#cb15-652" aria-hidden="true" tabindex="-1"></a>param_grid <span class="op">=</span> {</span>
<span id="cb15-653"><a href="#cb15-653" aria-hidden="true" tabindex="-1"></a>    <span class="st">'kernel'</span>: [<span class="st">'rbf'</span>],</span>
<span id="cb15-654"><a href="#cb15-654" aria-hidden="true" tabindex="-1"></a>    <span class="st">'C'</span>: [<span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">1000</span>],</span>
<span id="cb15-655"><a href="#cb15-655" aria-hidden="true" tabindex="-1"></a>    <span class="st">'gamma'</span>: [<span class="st">'scale'</span>, <span class="st">'auto'</span>, <span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="dv">1</span>]</span>
<span id="cb15-656"><a href="#cb15-656" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-657"><a href="#cb15-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-658"><a href="#cb15-658" aria-hidden="true" tabindex="-1"></a><span class="co"># Grid Search</span></span>
<span id="cb15-659"><a href="#cb15-659" aria-hidden="true" tabindex="-1"></a>grid_search <span class="op">=</span> GridSearchCV(svr, param_grid, cv<span class="op">=</span><span class="dv">5</span>, scoring<span class="op">=</span><span class="st">'r2'</span>, verbose<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb15-660"><a href="#cb15-660" aria-hidden="true" tabindex="-1"></a>grid_search.fit(X_train_scaled, y_train_scaled)</span>
<span id="cb15-661"><a href="#cb15-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-662"><a href="#cb15-662" aria-hidden="true" tabindex="-1"></a><span class="co"># Best estimator</span></span>
<span id="cb15-663"><a href="#cb15-663" aria-hidden="true" tabindex="-1"></a>best_model <span class="op">=</span> grid_search.best_estimator_</span>
<span id="cb15-664"><a href="#cb15-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-665"><a href="#cb15-665" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict on test data</span></span>
<span id="cb15-666"><a href="#cb15-666" aria-hidden="true" tabindex="-1"></a>y_pred_scaled <span class="op">=</span> best_model.predict(X_test_scaled)</span>
<span id="cb15-667"><a href="#cb15-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-668"><a href="#cb15-668" aria-hidden="true" tabindex="-1"></a><span class="co"># Inverse transform predictions and target</span></span>
<span id="cb15-669"><a href="#cb15-669" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> scaler_y.inverse_transform(y_pred_scaled.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)).ravel()</span>
<span id="cb15-670"><a href="#cb15-670" aria-hidden="true" tabindex="-1"></a>y_test_inv <span class="op">=</span> y_test.values  <span class="co"># Original y_test for evaluation</span></span>
<span id="cb15-671"><a href="#cb15-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-672"><a href="#cb15-672" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate metrics</span></span>
<span id="cb15-673"><a href="#cb15-673" aria-hidden="true" tabindex="-1"></a>mse <span class="op">=</span> mean_squared_error(y_test_inv, y_pred)</span>
<span id="cb15-674"><a href="#cb15-674" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y_test_inv, y_pred)</span>
<span id="cb15-675"><a href="#cb15-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-676"><a href="#cb15-676" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate Adjusted R-squared</span></span>
<span id="cb15-677"><a href="#cb15-677" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> X_test.shape[<span class="dv">0</span>]  <span class="co"># Number of test samples</span></span>
<span id="cb15-678"><a href="#cb15-678" aria-hidden="true" tabindex="-1"></a>k <span class="op">=</span> X_test.shape[<span class="dv">1</span>]  <span class="co"># Number of predictor variables</span></span>
<span id="cb15-679"><a href="#cb15-679" aria-hidden="true" tabindex="-1"></a>r2_adjusted <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> ((<span class="dv">1</span> <span class="op">-</span> r2) <span class="op">*</span> (n <span class="op">-</span> <span class="dv">1</span>) <span class="op">/</span> (n <span class="op">-</span> k <span class="op">-</span> <span class="dv">1</span>))</span>
<span id="cb15-680"><a href="#cb15-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-681"><a href="#cb15-681" aria-hidden="true" tabindex="-1"></a><span class="co"># Print Results</span></span>
<span id="cb15-682"><a href="#cb15-682" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"===== RBF Kernel: Model Summary ====="</span>)</span>
<span id="cb15-683"><a href="#cb15-683" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Best Hyperparameters:"</span>, grid_search.best_params_)</span>
<span id="cb15-684"><a href="#cb15-684" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Performance Metrics:"</span>)</span>
<span id="cb15-685"><a href="#cb15-685" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Mean Squared Error (MSE): </span><span class="sc">{</span>mse<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb15-686"><a href="#cb15-686" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"RÂ² Score: </span><span class="sc">{</span>r2<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb15-687"><a href="#cb15-687" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Adjusted RÂ² Score: </span><span class="sc">{</span>r2_adjusted<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb15-688"><a href="#cb15-688" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Best Estimator:"</span>)</span>
<span id="cb15-689"><a href="#cb15-689" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(best_model)</span>
<span id="cb15-690"><a href="#cb15-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-691"><a href="#cb15-691" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-692"><a href="#cb15-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-693"><a href="#cb15-693" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Table 9 - Support Vector Machine: All Factors with One-Hot-Encoding and Grid Search Polynomial Kernel Hyperparameters</span></span>
<span id="cb15-694"><a href="#cb15-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-697"><a href="#cb15-697" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb15-698"><a href="#cb15-698" aria-hidden="true" tabindex="-1"></a><span class="co"># trying to optimize the SVM poly kernal to improve model performance</span></span>
<span id="cb15-699"><a href="#cb15-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-700"><a href="#cb15-700" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> GridSearchCV</span>
<span id="cb15-701"><a href="#cb15-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-702"><a href="#cb15-702" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> ev_charging[[<span class="st">'Vehicle Model'</span>,<span class="st">'Battery Capacity (kWh)'</span>,<span class="st">'Charging Station Location'</span>,</span>
<span id="cb15-703"><a href="#cb15-703" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'Energy Consumed (kWh)'</span>,<span class="st">'Charging Duration (hours)'</span>,<span class="st">'Charging Rate (kW)'</span>,</span>
<span id="cb15-704"><a href="#cb15-704" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'Time of Day'</span>,<span class="st">'Day of Week'</span>,<span class="st">'State of Charge (Start %)'</span>,</span>
<span id="cb15-705"><a href="#cb15-705" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'State of Charge (End %)'</span>,<span class="st">'Distance Driven (since last charge) (km)'</span>,</span>
<span id="cb15-706"><a href="#cb15-706" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'Temperature (Â°C)'</span>,<span class="st">'Vehicle Age (years)'</span>,<span class="st">'Charger Type'</span>,<span class="st">'User Type'</span>]]</span>
<span id="cb15-707"><a href="#cb15-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-708"><a href="#cb15-708" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> ev_charging[<span class="st">'Charging Cost (USD)'</span>]</span>
<span id="cb15-709"><a href="#cb15-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-710"><a href="#cb15-710" aria-hidden="true" tabindex="-1"></a><span class="co"># one-hot-encoding of categorical variables </span></span>
<span id="cb15-711"><a href="#cb15-711" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> pd.get_dummies(X, drop_first<span class="op">=</span><span class="va">True</span>, dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb15-712"><a href="#cb15-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-713"><a href="#cb15-713" aria-hidden="true" tabindex="-1"></a><span class="co"># splitting data in to training and test datasets </span></span>
<span id="cb15-714"><a href="#cb15-714" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb15-715"><a href="#cb15-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-716"><a href="#cb15-716" aria-hidden="true" tabindex="-1"></a><span class="co"># Scaling the data</span></span>
<span id="cb15-717"><a href="#cb15-717" aria-hidden="true" tabindex="-1"></a>scaler_X <span class="op">=</span> StandardScaler()</span>
<span id="cb15-718"><a href="#cb15-718" aria-hidden="true" tabindex="-1"></a>scaler_y <span class="op">=</span> StandardScaler()</span>
<span id="cb15-719"><a href="#cb15-719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-720"><a href="#cb15-720" aria-hidden="true" tabindex="-1"></a>X_train_scaled <span class="op">=</span> scaler_X.fit_transform(X_train)</span>
<span id="cb15-721"><a href="#cb15-721" aria-hidden="true" tabindex="-1"></a>X_test_scaled <span class="op">=</span> scaler_X.transform(X_test)</span>
<span id="cb15-722"><a href="#cb15-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-723"><a href="#cb15-723" aria-hidden="true" tabindex="-1"></a>y_train_scaled <span class="op">=</span> scaler_y.fit_transform(y_train.values.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)).ravel()</span>
<span id="cb15-724"><a href="#cb15-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-725"><a href="#cb15-725" aria-hidden="true" tabindex="-1"></a><span class="co"># SVM grid search parameters </span></span>
<span id="cb15-726"><a href="#cb15-726" aria-hidden="true" tabindex="-1"></a>svr <span class="op">=</span> SVR()</span>
<span id="cb15-727"><a href="#cb15-727" aria-hidden="true" tabindex="-1"></a>param_grid <span class="op">=</span> {</span>
<span id="cb15-728"><a href="#cb15-728" aria-hidden="true" tabindex="-1"></a>    <span class="st">'kernel'</span>: [<span class="st">'poly'</span>],         </span>
<span id="cb15-729"><a href="#cb15-729" aria-hidden="true" tabindex="-1"></a>    <span class="st">'C'</span>: [<span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">100</span>],       </span>
<span id="cb15-730"><a href="#cb15-730" aria-hidden="true" tabindex="-1"></a>    <span class="st">'degree'</span>: [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>],      </span>
<span id="cb15-731"><a href="#cb15-731" aria-hidden="true" tabindex="-1"></a>    <span class="st">'gamma'</span>: [<span class="st">'scale'</span>, <span class="st">'auto'</span>]</span>
<span id="cb15-732"><a href="#cb15-732" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-733"><a href="#cb15-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-734"><a href="#cb15-734" aria-hidden="true" tabindex="-1"></a><span class="co"># Grid Search</span></span>
<span id="cb15-735"><a href="#cb15-735" aria-hidden="true" tabindex="-1"></a>grid_search <span class="op">=</span> GridSearchCV(svr, param_grid, cv<span class="op">=</span><span class="dv">5</span>, scoring<span class="op">=</span><span class="st">'r2'</span>, verbose<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb15-736"><a href="#cb15-736" aria-hidden="true" tabindex="-1"></a>grid_search.fit(X_train_scaled, y_train_scaled)</span>
<span id="cb15-737"><a href="#cb15-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-738"><a href="#cb15-738" aria-hidden="true" tabindex="-1"></a><span class="co"># Best estimator</span></span>
<span id="cb15-739"><a href="#cb15-739" aria-hidden="true" tabindex="-1"></a>best_model <span class="op">=</span> grid_search.best_estimator_</span>
<span id="cb15-740"><a href="#cb15-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-741"><a href="#cb15-741" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict on test data</span></span>
<span id="cb15-742"><a href="#cb15-742" aria-hidden="true" tabindex="-1"></a>y_pred_scaled <span class="op">=</span> best_model.predict(X_test_scaled)</span>
<span id="cb15-743"><a href="#cb15-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-744"><a href="#cb15-744" aria-hidden="true" tabindex="-1"></a><span class="co"># Inverse transform predictions and target</span></span>
<span id="cb15-745"><a href="#cb15-745" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> scaler_y.inverse_transform(y_pred_scaled.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)).ravel()</span>
<span id="cb15-746"><a href="#cb15-746" aria-hidden="true" tabindex="-1"></a>y_test_inv <span class="op">=</span> y_test.values  <span class="co"># Original y_test for evaluation</span></span>
<span id="cb15-747"><a href="#cb15-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-748"><a href="#cb15-748" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate metrics</span></span>
<span id="cb15-749"><a href="#cb15-749" aria-hidden="true" tabindex="-1"></a>mse <span class="op">=</span> mean_squared_error(y_test_inv, y_pred)</span>
<span id="cb15-750"><a href="#cb15-750" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y_test_inv, y_pred)</span>
<span id="cb15-751"><a href="#cb15-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-752"><a href="#cb15-752" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate Adjusted R-squared</span></span>
<span id="cb15-753"><a href="#cb15-753" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> X_test.shape[<span class="dv">0</span>]  <span class="co"># Number of test samples</span></span>
<span id="cb15-754"><a href="#cb15-754" aria-hidden="true" tabindex="-1"></a>k <span class="op">=</span> X_test.shape[<span class="dv">1</span>]  <span class="co"># Number of predictor variables</span></span>
<span id="cb15-755"><a href="#cb15-755" aria-hidden="true" tabindex="-1"></a>r2_adjusted <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> ((<span class="dv">1</span> <span class="op">-</span> r2) <span class="op">*</span> (n <span class="op">-</span> <span class="dv">1</span>) <span class="op">/</span> (n <span class="op">-</span> k <span class="op">-</span> <span class="dv">1</span>))</span>
<span id="cb15-756"><a href="#cb15-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-757"><a href="#cb15-757" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"===== Kernel = Poly: Model Summary ====="</span>)</span>
<span id="cb15-758"><a href="#cb15-758" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Best Hyperparameters:"</span>)</span>
<span id="cb15-759"><a href="#cb15-759" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(grid_search.best_params_)</span>
<span id="cb15-760"><a href="#cb15-760" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Performance Metrics:"</span>)</span>
<span id="cb15-761"><a href="#cb15-761" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Mean Squared Error (MSE): </span><span class="sc">{</span>mse<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb15-762"><a href="#cb15-762" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"RÂ² Score: </span><span class="sc">{</span>r2<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb15-763"><a href="#cb15-763" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Adjusted RÂ² Score: </span><span class="sc">{</span>r2_adjusted<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb15-764"><a href="#cb15-764" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Best Estimator:"</span>)</span>
<span id="cb15-765"><a href="#cb15-765" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(best_model)</span>
<span id="cb15-766"><a href="#cb15-766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-767"><a href="#cb15-767" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-768"><a href="#cb15-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-769"><a href="#cb15-769" aria-hidden="true" tabindex="-1"></a><span class="fu">## Discussion</span></span>
<span id="cb15-770"><a href="#cb15-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-771"><a href="#cb15-771" aria-hidden="true" tabindex="-1"></a>The term project comprised an analysis of an electric vehicle charging dataset, see Tables 1 and 2. The analysis of the dataset, to understand what variables influenced charging cost was completed in stages. First, a graphical assessment of the data was completed, see Figures 1 to 10. Second, a statistical review leveraging analysis of variance (ANOVA) was completed to try and understand or isolated variables that might have an effect on charging cost, see Figures 11 to 14. Next empirical models were created and refined to predict charging cost as a function of the other variables in the dataset, see Tables 1 and 2. The modeling effort included both multivariate regression analysis and support vector machine algorithms. The results of the regression analysis is provided in Tables 4, 5 and 6. The results of the support vector machine algorithms are presented in Tables 7 and 8.</span>
<span id="cb15-772"><a href="#cb15-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-773"><a href="#cb15-773" aria-hidden="true" tabindex="-1"></a>The electric vehicle charging dataset comprised 1320 rows of data and 20 columns. Each row was a charging event with various data documented in the columns, see Tables 1 and 2. The graphical assessment of the dataset did not reveal any obvious trends with respect to charging cost, see Figures 1 to 10.</span>
<span id="cb15-774"><a href="#cb15-774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-775"><a href="#cb15-775" aria-hidden="true" tabindex="-1"></a>The statistical analysis of the data was completed using analysis of variance to compare the means across multiple subgroups, see Figures 11, 12, and 13. That work indicated that vehicle type and charger type had an effect on charging cost, or at least one subgroup in each analysis had an unique mean, see Figures 11 and 13 respectively. Temperature was a continuous variable; as a result, simple linear regression was used to determine the relationship between temperature and charging cost, see Table 3. That work indicated temperature did influence charging cost, increasing temperature increased the cost of charging, see Table 3 and Figure 14.</span>
<span id="cb15-776"><a href="#cb15-776" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-777"><a href="#cb15-777" aria-hidden="true" tabindex="-1"></a>Multivariable regression analysis was used to create predictive models of charging cost as a function of the other variables in the dataset, see Tables 4, 6, and 6. The regression analysis included both continuous numerical variables and categorical variables, the categorical variables were transformed to numerical values using one-hot-encoding. The regression analysis approach was iterative. The first model included all the factors in the dataset and yielded an R-sq-adjusted of 0.017 indicating the model explained 1.7% of the variance in the dataset, see Tables 4a and 4b. Ideally, an R-sq-adjusted <span class="sc">\&gt;</span> 70% would be preferred for a well performing predictive model. The performance of regression model was improved by removing non-significant terms, see Tables 5 and 6. However, the best performing model had an R-sq-adjusted value of 0.021 or 2.1%.</span>
<span id="cb15-778"><a href="#cb15-778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-779"><a href="#cb15-779" aria-hidden="true" tabindex="-1"></a>In an effort to create an improved predictive model the support vector machine (SVM) algorithm was attempted, see Tables 7, 8 and 9. The initial SVM model included only numerical factors to create a predictive model of charging cost; however, that model also yielded a low R-sq-adjusted value of -0.25, see Table 7. To improve the SVM algorithm performance a second attempt was made. That second attempt included both numerical and categorical factors, one-hot-encoding was used to transform categorical factors to numerical, and the RBF kernel implement, see Table 8. The data was scaled using the standard scalar to ensure a uniform range across all factors. To find optimum SVM parameters a grid search was included. Here too the model performed poorly providing an R-sq-adjusted of -0.39 indicating the SVM was no better than linear regression, see Table 8. A third attempt using the polynomial kernel and grid search to optimizes hyper-parameters did not yield improved results, see Table 9. The SVM regression did not perform as well as the multi-variable regression perhaps because the dataset was simply not large enough or the dataset is not well suited to the SVM algorithm.</span>
<span id="cb15-780"><a href="#cb15-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-781"><a href="#cb15-781" aria-hidden="true" tabindex="-1"></a><span class="fu">## Conclusions</span></span>
<span id="cb15-782"><a href="#cb15-782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-783"><a href="#cb15-783" aria-hidden="true" tabindex="-1"></a>The ChilePeppers team completed an assessment of an electric vehicle charging dataset. The dataset provided a record of 1320 charging events and recording 20 parameters for each event. The analysis was completed in stages. First a graphical review of the dataset was completed. Then a statistical review was leveraged to complete hypothesis testing using both ANOVA and regression analysis to understand or identify charging factors that influence the charging cost. Next predictive models were attempted to estimate the charging cost as a function of the other parameters in the dataset using both multivariate regression and support vector machine algorithms. The statistical analysis identified vehicle type and charger type as influencing charging cost. The predictive models while yielding empirical models or equations provided algorithms with very low values for R-sq and R-sq-adjusted. The multi-variable regression analysis provided a model with R-squared-adusted = 2.1% and the support vector machine regression algorithm provided a negative value for R-squared-adjusted. Ideally an empirical model would be characterized by an R-squared adjusted greater than 70% indicating the model explains more than 70% of the variance in the dataset. In this example the models are not capable of predicting charging cost as a function of the variables studied.</span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>